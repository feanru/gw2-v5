{"version":3,"file":"itemHandlers.8qJA9adZ.min.js","sources":["../../src/js/itemHandlers.js"],"sourcesContent":["// itemHandlers.js\n// Manejadores para las acciones de los ítems\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Inicializar manejador del botón de guardar ítem\n    initSaveItemHandler();\n});\n\n/**\n * Inicializa el manejador del botón de guardar ítem\n */\nfunction initSaveItemHandler() {\n    const saveButton = document.getElementById('btn-guardar-item');\n    if (!saveButton) return;\n    // Registrar manejador de clic independientemente del estado de autenticación\n    saveButton.addEventListener('click', handleSaveItem);\n}\n\n/**\n * Maneja el guardado de un ítem\n */\nasync function handleSaveItem() {\n    const user = window.Auth && window.Auth.currentUser;\n    if (!user) {\n        if (window.showAuthOptions) {\n            window.showAuthOptions();\n        } else if (window.Auth && window.Auth.requireAuth) {\n            window.Auth.requireAuth();\n        }\n        return;\n    }\n\n    // Obtener datos del ítem actual\n    const itemId = new URLSearchParams(window.location.search).get('id');\n    const itemName = document.querySelector('.item-name')?.textContent || 'Ítem sin nombre';\n    \n    if (!itemId) {\n        window.StorageUtils?.showToast('No se pudo obtener el ítem actual', 'error');\n        return;\n    }\n    \n    // Guardar el ítem\n    const item = { id: parseInt(itemId, 10), nombre: itemName };\n    if (window.StorageUtils && window.StorageUtils.saveFavorito) {\n        await window.StorageUtils.saveFavorito(item);\n    }\n    \n    // Mostrar notificación\n    window.StorageUtils?.showToast('Ítem guardado en favoritos');\n}\n\n// Inicialización automática si el DOM ya está cargado\nif (document.readyState === 'complete' || document.readyState === 'interactive') {\n    setTimeout(initSaveItemHandler, 1);\n}\n"],"names":["initSaveItemHandler","saveButton","document","getElementById","addEventListener","handleSaveItem","async","window","Auth","currentUser","showAuthOptions","requireAuth","itemId","URLSearchParams","location","search","get","itemName","querySelector","textContent","StorageUtils","showToast","item","id","parseInt","nombre","saveFavorito","readyState","setTimeout"],"mappings":"AAWA,SAASA,IACL,MAAMC,EAAaC,SAASC,eAAe,oBACtCF,GAELA,EAAWG,iBAAiB,QAASC,EACzC,CAKAC,eAAeD,IAEX,KADaE,OAAOC,MAAQD,OAAOC,KAAKC,aAOpC,YALIF,OAAOG,gBACPH,OAAOG,kBACAH,OAAOC,MAAQD,OAAOC,KAAKG,aAClCJ,OAAOC,KAAKG,eAMpB,MAAMC,EAAS,IAAIC,gBAAgBN,OAAOO,SAASC,QAAQC,IAAI,MACzDC,EAAWf,SAASgB,cAAc,eAAeC,aAAe,kBAEtE,IAAKP,EAED,YADAL,OAAOa,cAAcC,UAAU,oCAAqC,SAKxE,MAAMC,EAAO,CAAEC,GAAIC,SAASZ,EAAQ,IAAKa,OAAQR,GAC7CV,OAAOa,cAAgBb,OAAOa,aAAaM,oBACrCnB,OAAOa,aAAaM,aAAaJ,GAI3Cf,OAAOa,cAAcC,UAAU,6BACnC,CA9CAnB,SAASE,iBAAiB,mBAAoB,WAE1CJ,GACJ,GA8C4B,aAAxBE,SAASyB,YAAqD,gBAAxBzB,SAASyB,YAC/CC,WAAW5B,EAAqB"}