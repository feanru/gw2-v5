import{preloadPrices}from"./priceHelper.min.js";import apiHealth from"./apiHealth.min.js";export function startPriceUpdater(t=[],e,r=6e4){if(!Array.isArray(t)||0===t.length)return()=>{};let a=!1;return async function i(){if(a)return;const o=apiHealth.getBackoff();o&&await new Promise(t=>setTimeout(t,o));try{const r=await preloadPrices(t);"function"==typeof e&&e(r)}catch(t){apiHealth.recordFailure()}a||setTimeout(i,r)}(),()=>{a=!0}}export default{startPriceUpdater:startPriceUpdater};