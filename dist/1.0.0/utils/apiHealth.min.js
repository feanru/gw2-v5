const failureTimestamps=[],WINDOW_MS=6e4,DOWN_THRESHOLD=5;function cleanup(){const t=Date.now()-6e4;for(;failureTimestamps.length&&failureTimestamps[0]<t;)failureTimestamps.shift()}function recordFailure(){failureTimestamps.push(Date.now()),cleanup(),updateIndicator()}function recordSuccess(){cleanup(),updateIndicator()}function getState(){cleanup();const t=failureTimestamps.length;return t>5?"down":t>0?"slow":"ok"}function getBackoff(){const t=getState();return"down"===t?5e3:"slow"===t?1e3:0}let indicatorEl;function updateIndicator(){if("undefined"==typeof document)return;const t=getState();indicatorEl||(indicatorEl=document.createElement("div"),indicatorEl.id="api-status-indicator",indicatorEl.style.position="fixed",indicatorEl.style.bottom="10px",indicatorEl.style.right="10px",indicatorEl.style.padding="4px 8px",indicatorEl.style.background="rgba(0,0,0,0.7)",indicatorEl.style.color="#fff",indicatorEl.style.borderRadius="4px",indicatorEl.style.zIndex="10000",indicatorEl.style.display="none",document.body.appendChild(indicatorEl)),"ok"===t?indicatorEl.style.display="none":(indicatorEl.textContent="slow"===t?"API lenta":"API ca√≠da",indicatorEl.style.display="block")}export default{recordFailure:recordFailure,recordSuccess:recordSuccess,getState:getState,getBackoff:getBackoff};