{"version":3,"file":"bundle-legendary.ZAB3gVn4.min.js","sources":["../../src/js/bundle-legendary.js"],"sourcesContent":["// Bundled legendary crafting scripts\nimport { getCached, setCached, fetchDedup } from './utils/cache.js';\nimport { getPrice, clearCache as clearPriceCache } from './utils/priceHelper.js';\n/**\n * Servicio para interactuar con la API de Guild Wars 2\n */\nclass GuildWars2API {\n  constructor() {\n    this.BASE_URL = 'https://api.guildwars2.com/v2';\n    this.ITEMS_ENDPOINT = `${this.BASE_URL}/items`;\n    this.PRICES_ENDPOINT = `${this.BASE_URL}/commerce/prices`;\n    this.RECIPES_ENDPOINT = `${this.BASE_URL}/recipes/search`;\n    this.ITEMS_BULK_ENDPOINT = `${this.BASE_URL}/items?ids=`;\n    \n    // Configuración de caché\n    this.CACHE_PREFIX = 'gw2_api_cache_';\n    this.CACHE_DURATION = 24 * 60 * 60 * 1000; // 24 horas en milisegundos\n  }\n\n  /**\n   * Realiza una petición a la API con manejo de caché\n   */\n  async _fetchWithCache(url, useCache = true) {\n    const cacheKey = this.CACHE_PREFIX + btoa(url);\n    if (useCache) {\n      const cached = getCached(cacheKey);\n      if (cached) return cached;\n    }\n    try {\n      const response = await fetchDedup(url);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n\n      // Clone the response to parse the body without consuming the original\n      const cloned = response.clone();\n      const data = await cloned.json();\n\n      if (useCache) {\n        setCached(cacheKey, data, this.CACHE_DURATION);\n      }\n      return data;\n    } catch (error) {\n      console.error('Error en la petición a la API:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Obtiene los precios de un ítem\n   */\n  async getItemPrices(itemId) {\n    const url = `${this.PRICES_ENDPOINT}/${itemId}`;\n    return this._fetchWithCache(url);\n  }\n\n  /**\n   * Obtiene los detalles de un ítem\n   */\n  async getItemDetails(itemId) {\n    try {\n      const url = `${this.ITEMS_ENDPOINT}/${itemId}?lang=es`;\n      const item = await this._fetchWithCache(url);\n      \n      if (!item) {\n        console.warn(`[getItemDetails] No se encontró el ítem con ID: ${itemId}`);\n        return null;\n      }\n      \n      // Registrar información de depuración\n      \n      // Si el ítem tiene un icono, lo normalizamos\n      if (item.icon) {\n        \n        // Si el icono ya es una URL completa, lo dejamos igual\n        if (item.icon.startsWith('http')) {\n        } \n        // Si es una ruta relativa, la convertimos a URL completa\n        else {\n          // Eliminar cualquier prefijo 'file/' o '/' duplicado\n          const cleanPath = item.icon\n            .replace(/^file\\//, '')  // Eliminar 'file/' al inicio\n            .replace(/^\\//, '');     // Eliminar '/' al inicio\n            \n          item.icon = `https://render.guildwars2.com/file/${cleanPath}`;\n        }\n      } else {\n        // Si no hay icono, intentamos usar el ID del ítem\n        console.warn(`[getItemDetails] El ítem ${itemId} no tiene icono definido`);\n        item.icon = `https://render.guildwars2.com/file/${itemId}.png`;\n      }\n      \n      return item;\n      \n    } catch (error) {\n      console.error(`[getItemDetails] Error al obtener detalles del ítem ${itemId}:`, error);\n      \n      // Si hay un error, devolvemos un objeto con la información básica\n      return {\n        id: itemId,\n        name: `Item ${itemId}`,\n        icon: 'https://render.guildwars2.com/file/0120CB0368B7953F0D3BD2A0C9100BCF0839FF4D/219035.png',\n        error: error.message\n      };\n    }\n  }\n\n  /**\n   * Obtiene múltiples ítems por sus IDs\n   */\n  async getItemsBulk(itemIds) {\n    if (!itemIds || !itemIds.length) return [];\n    const idsParam = itemIds.join(',');\n    const url = `${this.ITEMS_BULK_ENDPOINT}${idsParam}`;\n    return this._fetchWithCache(url);\n  }\n\n  /**\n   * Busca recetas que usan un ítem específico\n   */\n  async findRecipesForItem(itemId) {\n    const url = `${this.RECIPES_ENDPOINT}?output=${itemId}`;\n    const recipeIds = await this._fetchWithCache(url);\n    \n    if (!recipeIds || !recipeIds.length) return [];\n    \n    // Obtener detalles de las recetas\n    const recipesUrl = `${this.BASE_URL}/recipes?ids=${recipeIds.join(',')}`;\n    return this._fetchWithCache(recipesUrl);\n  }\n\n  /**\n   * Limpia la caché de la API\n   */\n  clearCache() {\n    try {\n      Object.keys(localStorage).forEach(key => {\n        if (key.startsWith(this.CACHE_PREFIX)) {\n          localStorage.removeItem(key);\n        }\n      });\n      return true;\n    } catch (e) {\n      console.error('Error al limpiar la caché:', e);\n      return false;\n    }\n  }\n}\n\nconst gw2API = new GuildWars2API();\n/**\n * Clase que representa un ingrediente en el árbol de crafteo\n */\nclass Ingredient {\n  constructor(id, name, type, rarity = null, count = 1, parent = null) {\n    this.id = id;\n    this.name = name;\n    this.type = type || 'crafting_material';\n    this.rarity = rarity;\n    this.count = count;\n    this.parent = parent;\n    this.components = [];\n    this.icon = null;\n    this.source = null;\n    this._buyPrice = 0;\n    this._sellPrice = 0;\n    this._priceLoaded = false;\n    \n      // Generamos la URL del icono basada en el ID si no hay un icono definido\n    // Esto se hace en el getter en lugar del constructor para asegurar que siempre tengamos la última versión\n    Object.defineProperty(this, 'icon', {\n      get() {\n        return this._icon || this._generateIconUrl();\n      },\n      set(value) {\n        this._icon = value;\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n  \n  /**\n   * Genera una URL de icono basada en el ID del ítem\n   * @returns {Promise<string>} URL del icono o URL por defecto si hay error\n   */\n  async _generateIconUrl() {\n    // Si ya tenemos un ícono en caché, lo retornamos\n    if (this._icon) {\n      if (this._icon.startsWith('http')) return this._icon;\n      return `https://render.guildwars2.com/file/${this._icon}`;\n    }\n\n    // Si no hay ID, retornamos el ícono por defecto\n    if (!this.id) {\n      return this._getDefaultIconUrl();\n    }\n\n    try {\n      // Obtener los detalles del ítem utilizando el servicio con caché\n      const itemData = await gw2API.getItemDetails(this.id);\n\n      if (itemData && itemData.icon) {\n        this._icon = itemData.icon;\n        return this._formatIconUrl(this._icon);\n      }\n\n      return this._getDefaultIconUrl();\n    } catch (error) {\n      console.warn('No se pudo cargar el icono para el ítem', this.id, error);\n      return this._getDefaultIconUrl();\n    }\n  }\n  \n  /**\n   * Obtiene la URL del icono por defecto\n   * @returns {string} URL del icono por defecto\n   */\n  _getDefaultIconUrl() {\n    return 'https://render.guildwars2.com/file/0120CB0368B7953F0D3BD2A0C9100BCF0839FF4D/219035.png';\n  }\n  \n  /**\n   * Formatea una URL de icono, asegurando que sea una URL completa\n   * @param {string} iconPath - Ruta o URL del icono\n   * @returns {string} URL completa del icono\n   */\n  _formatIconUrl(iconPath) {\n    if (!iconPath) return null;\n    \n    // Si ya es una URL completa\n    if (iconPath.startsWith('http')) {\n      return iconPath;\n    }\n    \n    // Si comienza con 'file/', lo eliminamos para evitar duplicados\n    const cleanPath = iconPath.startsWith('file/') \n      ? iconPath.substring(5) \n      : iconPath;\n    \n    // Aseguramos que no tenga una barra al inicio\n    const normalizedPath = cleanPath.startsWith('/') \n      ? cleanPath.substring(1) \n      : cleanPath;\n    \n    return `https://render.guildwars2.com/file/${normalizedPath}`;\n  }\n\n  /**\n   * Agrega un componente hijo\n   */\n  addComponent(component) {\n    if (component) {\n      this.components.push(component);\n      component.parent = this;\n    }\n  }\n\n\n\n  /**\n   * Obtiene el precio de compra del ítem\n   * @returns {number} Precio de compra en cobre\n   */\n  get buyPrice() {\n    return this._buyPrice || 0;\n  }\n\n  /**\n   * Obtiene el precio de venta del ítem\n   * @returns {number} Precio de venta en cobre\n   */\n  get sellPrice() {\n    return this._sellPrice || 0;\n  }\n\n  /**\n   * Establece los precios del ítem\n   * @param {number} buyPrice - Precio de compra en cobre\n   * @param {number} sellPrice - Precio de venta en cobre\n   */\n  setPrices(buyPrice, sellPrice) {\n    this._buyPrice = buyPrice || 0;\n    this._sellPrice = sellPrice || 0;\n    this._priceLoaded = true;\n  }\n\n  /**\n   * Verifica si el precio ya fue cargado\n   * @returns {boolean} true si el precio ya fue cargado\n   */\n  isPriceLoaded() {\n    return this._priceLoaded;\n  }\n\n  /**\n   * Obtiene el precio total de compra (precio unitario * cantidad)\n   * @returns {number} Precio total de compra en cobre\n   */\n  getTotalBuyPrice() {\n    return this.buyPrice * this.count;\n  }\n\n  /**\n   * Obtiene el precio total de venta (precio unitario * cantidad)\n   * @returns {number} Precio total de venta en cobre\n   */\n  getTotalSellPrice() {\n    return this.sellPrice * this.count;\n  }\n\n  /**\n   * Calcula los totales de forma recursiva para este ingrediente y sus componentes\n   * @returns {Object} Objeto con los totales de compra y venta\n   */\n  calculateTotals(multiplier = 1) {\n    const effective = multiplier * this.count;\n\n    // Si no tiene componentes, devolvemos los precios directos\n    if (!this.components || this.components.length === 0) {\n      return {\n        buy: this.buyPrice * effective,\n        sell: this.sellPrice * effective,\n        isCraftable: false\n      };\n    }\n\n    // Manejo especial para Trébol místico (ID 19675)\n    if (this.id === 19675) {\n      let totalBuy = 0;\n      let totalSell = 0;\n      let todosTienenPrecio = true;\n\n      let counts = null;\n      if (this.count === 77) {\n        counts = [250, 250, 250, 1500].map(c => c * multiplier);\n      } else if (this.count === 38) {\n        counts = this.components.map(() => 38 * multiplier);\n      }\n\n      if (counts) {\n        this.components.forEach((componente, idx) => {\n          const originalCount = componente.count;\n          componente.count = counts[idx] || 0;\n          const totalesComponente = componente.calculateTotals(1);\n          componente.count = originalCount;\n          totalBuy += totalesComponente.buy;\n          totalSell += totalesComponente.sell;\n          if (totalesComponente.buy <= 0 && totalesComponente.sell <= 0) {\n            todosTienenPrecio = false;\n          }\n        });\n        return { buy: totalBuy, sell: totalSell, isCraftable: todosTienenPrecio };\n      }\n    }\n\n    // Si tiene componentes, calculamos los totales recursivamente\n    let totalBuy = 0;\n    let totalSell = 0;\n    let todosTienenPrecio = true;\n\n    for (const componente of this.components) {\n      const totalesComponente = componente.calculateTotals(effective);\n\n      // Sumar los precios de los componentes, considerando la cantidad\n      totalBuy += totalesComponente.buy;\n      totalSell += totalesComponente.sell;\n\n      // Si algún componente no tiene precio, marcamos como no crafteable\n      if (totalesComponente.buy <= 0 && totalesComponente.sell <= 0) {\n        todosTienenPrecio = false;\n      }\n    }\n\n    // Si todos los componentes tienen precio, actualizamos este ítem\n    if (todosTienenPrecio && totalBuy > 0 && !this._priceLoaded) {\n      this._buyPrice = totalBuy / effective;\n      this._sellPrice = totalSell / effective;\n      this._priceLoaded = true;\n    }\n\n    return {\n      buy: this.buyPrice * effective,\n      sell: this.sellPrice * effective,\n      isCraftable: todosTienenPrecio\n    };\n  }\n\n  /**\n   * Convierte el ingrediente a un objeto plano para serialización\n   */\n  toJSON() {\n    return {\n      id: this.id,\n      name: this.name,\n      type: this.type,\n      rarity: this.rarity,\n      count: this.count,\n      buyPrice: this._buyPrice,\n      sellPrice: this._sellPrice,\n      icon: this.icon,\n      source: this.source,\n      components: this.components.map(c => c.toJSON())\n    };\n  }\n}\n\n/**\n * Crea un árbol de ingredientes a partir de los datos de un ítem\n */\nasync function createIngredientTree1(itemData, parent = null) {\n  if (!itemData) return null;\n\n  const apiDetails = await gw2API.getItemDetails(itemData.id);\n\n  // Crear el ingrediente con los datos básicos\n  const ingredient = new Ingredient(\n    itemData.id,\n    itemData.name,\n    itemData.type,\n    apiDetails?.rarity || itemData.rarity || null,\n    itemData.count || 1,\n    parent\n  );\n\n  // Copiar propiedades adicionales\n  if (itemData.icon) {\n    // Si el icono ya es una URL completa, lo usamos directamente\n    if (itemData.icon.startsWith('http') || itemData.icon.startsWith('//')) {\n      ingredient.icon = itemData.icon;\n    } \n    // Si es una ruta relativa, la convertimos a URL completa\n    else {\n      // Aseguramos que no tenga el prefijo 'file/' duplicado\n      const cleanIconPath = itemData.icon.startsWith('file/') \n        ? itemData.icon.substring(5) \n        : itemData.icon;\n      \n      ingredient.icon = `https://render.guildwars2.com/file/${cleanIconPath}`;\n    }\n  }\n  \n  if (itemData.source) ingredient.source = itemData.source;\n\n  // Lista de IDs que no deben buscar precios en el mercado\n  // Se excluyen materiales de cuenta, no comerciables o con precios especiales\n  const EXCLUDED_ITEM_IDS = [\n    // Materiales de cuenta o con precios especiales\n    20799,  // Esquirla de hematites (vinculado a la cuenta)\n    20797,  // Otra variante de Esquirla de hematites\n    19675,  // Trébol místico (vinculado a la cuenta)\n    19925,  // Esquirla de obsidiana (precio especial)\n    20796,  // Piedra filosofal (precio especial)\n    \n    // Materiales de tercera generación que no son comerciables\n    97829,  // Bendición de la Emperatriz de Jade\n    96137,  // Tributo dracónico\n    45178,  // Esencia de la suerte exótica\n    73137,  // Cubo de energía oscura estabilizada\n    71994,  // Bola de energía oscura\n    95813,  // Reactivo hidrocatalítico\n    79418   // Piedra rúnica mística\n  ];\n\n  // Función para verificar si un ítem debe ser excluido de la búsqueda de precios\n  const shouldSkipMarketCheck = (id, name) => {\n    // Verificar por ID\n    if (EXCLUDED_ITEM_IDS.includes(id)) {\n      return true;\n    }\n    \n    // Verificar por nombre (solo para ítems que no son comerciables)\n    if (name) {\n      const lowerName = name.toLowerCase();\n      return lowerName.includes('bendición') ||\n             lowerName.includes('tributo') ||\n             lowerName.includes('esencia de la suerte') ||\n             lowerName.startsWith('don de') ||\n             lowerName.endsWith('gift');\n    }\n    \n    return false;\n  };\n\n  // Cargar precios para materiales básicos que no estén en la lista de exclusión\n  if (ingredient.id === 19676) {\n    // Precio fijo para 'Piedra rúnica helada': 1g (10000 cobre)\n    ingredient.setPrices(10000, 10000);\n  } else if (isBasicMaterial(ingredient.id) && !shouldSkipMarketCheck(ingredient.id, ingredient.name)) {\n      try {\n        const prices = await getPrice(ingredient.id);\n        if (prices) {\n          ingredient.setPrices(prices.buy_price || 0, prices.sell_price || 0);\n        } else {\n          console.warn(`Precios no disponibles para ${ingredient.name} (${ingredient.id})`);\n          ingredient.setPrices(0, 0);\n        }\n      } catch (error) {\n      // Si la API devuelve un error (por ejemplo, 404), asumimos que no hay precios\n      console.warn(`Error al cargar precios para ${ingredient.name} (${ingredient.id}):`, error.message);\n      ingredient.setPrices(0, 0);\n    }\n  }\n\n  // Procesar componentes hijos si existen\n  if (itemData.components && Array.isArray(itemData.components)) {\n    const results = await Promise.allSettled(\n      itemData.components.map(componentData => createIngredientTree1(componentData, ingredient))\n    );\n    results.forEach(r => {\n      if (r.status === 'fulfilled' && r.value) {\n        ingredient.addComponent(r.value);\n      }\n    });\n    return ingredient;\n  }\n\n  return ingredient;\n}\n\n// Adaptador para convertir un objeto Ingredient al formato {id, qty, children}\nfunction adaptIngredientForWorker(ing) {\n  return {\n    id: ing.id,\n    qty: ing.count,\n    buy_price: ing.buyPrice > 0 ? ing.buyPrice : null,\n    sell_price: ing.sellPrice > 0 ? ing.sellPrice : null,\n    is_craftable: Array.isArray(ing.components) && ing.components.length > 0,\n    children: Array.isArray(ing.components) ? ing.components.map(adaptIngredientForWorker) : []\n  };\n}\n\n// Convierte la propiedad qty en count para el worker\nfunction _mapQtyToCount(node) {\n  node.count = node.qty;\n  delete node.qty;\n  if (Array.isArray(node.children)) {\n    node.children.forEach(_mapQtyToCount);\n  }\n}\n\n// Aplica los datos calculados por el worker al árbol original\nfunction applyWorkerData(src, dest) {\n  dest.total_buy = src.total_buy;\n  dest.total_sell = src.total_sell;\n  dest.total_crafted = src.total_crafted;\n  dest.crafted_price = src.crafted_price;\n  if (src.children && dest.components) {\n    for (let i = 0; i < src.children.length && i < dest.components.length; i++) {\n      applyWorkerData(src.children[i], dest.components[i]);\n    }\n  }\n}\n\nlet _costsWorker = null;\nasync function runCostsWorker(tree, globalQty = 1) {\n  if (typeof Worker === 'undefined') throw new Error('Web Workers no soportados');\n  if (!_costsWorker) {\n    _costsWorker = new Worker(new URL('./workers/costsWorker.js', import.meta.url), { type: 'module' });\n  }\n  return new Promise((resolve, reject) => {\n    const handleMessage = (e) => {\n      _costsWorker.removeEventListener('message', handleMessage);\n      _costsWorker.removeEventListener('error', handleError);\n      resolve(e.data || {});\n    };\n    const handleError = (err) => {\n      _costsWorker.removeEventListener('message', handleMessage);\n      _costsWorker.removeEventListener('error', handleError);\n      reject(err);\n    };\n    _costsWorker.addEventListener('message', handleMessage);\n    _costsWorker.addEventListener('error', handleError);\n    _costsWorker.postMessage({ ingredientTree: tree, globalQty });\n  });\n}\n\n// Importamos la API para usarla en esta función\n// Importamos las utilidades necesarias\n\n\n/**\n * Crea un árbol de ingredientes a partir de los datos de un ítem\n */\nasync function createIngredientTree3(itemData, parent = null) {\n  if (!itemData) return null;\n\n  const apiDetails = await gw2API.getItemDetails(itemData.id);\n\n  // Crear el ingrediente con los datos básicos\n  const ingredient = new Ingredient(\n    itemData.id,\n    itemData.name,\n    itemData.type,\n    apiDetails?.rarity || itemData.rarity || null,\n    itemData.count || 1,\n    parent\n  );\n\n  // Copiar propiedades adicionales\n  if (itemData.icon) {\n    // Si el icono ya es una URL completa, lo usamos directamente\n    if (itemData.icon.startsWith('http') || itemData.icon.startsWith('//')) {\n      ingredient.icon = itemData.icon;\n    } \n    // Si es una ruta relativa, la convertimos a URL completa\n    else {\n      // Aseguramos que no tenga el prefijo 'file/' duplicado\n      const cleanIconPath = itemData.icon.startsWith('file/') \n        ? itemData.icon.substring(5) \n        : itemData.icon;\n      \n      ingredient.icon = `https://render.guildwars2.com/file/${cleanIconPath}`;\n    }\n  }\n  \n  if (itemData.source) ingredient.source = itemData.source;\n\n  // Lista de IDs que no deben buscar precios en el mercado\n  const EXCLUDED_ITEM_IDS = [\n    // Tercera generación\n    97829,  // Bendición de la Emperatriz de Jade\n    96137,  // Tributo dracónico\n    20799,  // Esquirla de hematites\n    19925,  // Esquirla de obsidiana\n    20796,  // Cristal místico\n    45178,  // Esencia de la suerte exótica\n    73137,  // Cubo de energía oscura estabilizada\n    71994,  // Bola de energía oscura\n    95813,  // Reactivo hidrocatalítico\n    79418,  // Piedra rúnica mística\n    19675,  // Trébol místico\n    \n    // Materiales de Deldrimor\n    45845,  // Filo para hacha de acero de Deldrimor\n    45846,  // Filo para daga de acero de Deldrimor\n    45852,  // Cabeza para maza de acero de Deldrimor\n    45833,  // Cañón para pistola de acero de Deldrimor\n    45885,  // Núcleo para cetro de madera espiritual\n    45848,  // Filo para espada de acero de Deldrimor\n    45884,  // Núcleo para foco de madera espiritual\n    45858,  // Umbo para escudo de acero de Deldrimor\n    45838,  // Cabezal para antorcha de acero de Deldrimor\n    45839,  // Cuerno de acero de Deldrimor\n    45847,  // Filo para mandoble de acero de Deldrimor\n    45851,  // Cabeza para martillo de acero de Deldrimor\n    45841,  // Duela para arco largo de madera espiritual\n    45834,  // Cañón para rifle de acero de Deldrimor\n    45842,  // Duela para arco corto de madera espiritual\n    45887,  // Cabezal para báculo de madera espiritual\n    \n    // Poemas\n    97160,  // Poema sobre hachas\n    96187,  // Poema sobre dagas\n    96035,  // Poema sobre mazas\n    95809,  // Poema sobre pistolas\n    96173,  // Poema sobre cetros\n    97335,  // Poema sobre espadas\n    96951,  // Poema sobre focos\n    95740,  // Poema sobre escudos\n    97257,  // Poema sobre antorchas\n    96341,  // Poema sobre cuernos de guerra\n    96036,  // Poema sobre mandobles\n    97082,  // Poema sobre martillos\n    97800,  // Poema sobre arcos largos\n    97201,  // Poema sobre rifles\n    96849,  // Poema sobre arcos cortos\n    95962   // Poema sobre bastones\n  ];\n\n  // Función para verificar si un ítem debe ser excluido de la búsqueda de precios\n  const shouldSkipMarketCheck = (id, name) => {\n    // Verificar por ID\n    if (EXCLUDED_ITEM_IDS.includes(id)) {\n      return true;\n    }\n    \n    // Verificar por nombre (para items que podrían no estar en la lista)\n    if (name) {\n      const lowerName = name.toLowerCase();\n      // Excluir 'esquirla' excepto 'Esquirla de gloria' (ID 70820)\n      if (lowerName.includes('esquirla') && id !== 70820) return true;\n      if (lowerName.includes('trébol')) return true;\n      if (lowerName.includes('trebol')) return true;\n      // Las piedras suelen ser comerciables; solo excluir la rúnica mística\n      if (lowerName.includes('piedra rúnica mística')) return true;\n      if (lowerName.includes('bendición')) return true;\n      if (lowerName.includes('tributo')) return true;\n      if (lowerName.includes('esencia')) return true;\n      if (lowerName.includes('energía')) return true;\n      if (lowerName.includes('energia')) return true;\n      if (lowerName.startsWith('don de')) return true;\n      if (lowerName.includes(' gift')) return true;\n      if (lowerName.endsWith('gift')) return true;\n      return false;\n    }\n    \n    return false;\n  };\n\n  // Precios fijos para ciertos ítems\n  if (ingredient.id === 79418) {  // Piedra rúnica mística\n    // Precio fijo: 1g (10000 cobre)\n    ingredient.setPrices(10000, 10000);\n  }\n  // Manejo específico para Piedra imán dracónica amalgamada\n  else if (ingredient.id === 92687 || ingredient.id === 96978) {\n    const itemId = ingredient.id;\n    const itemName = ingredient.name;\n    \n    \n    // Forzar la carga de precios para este ítem\n      try {\n        const prices = await getPrice(itemId);\n        if (prices) {\n          ingredient.setPrices(prices.buy_price || 0, prices.sell_price || 0);\n        } else {\n          ingredient.setPrices(0, 0);\n        }\n      } catch (error) {\n        console.warn(`[ERROR] Error al cargar precios para ${itemName}:`, error.message);\n        ingredient.setPrices(0, 0);\n      }\n    return ingredient; // Retornar después del manejo personalizado\n  }\n  // Cargar precios para materiales básicos que no estén en la lista de exclusión\n  else if (isBasic3GenMaterial(ingredient.id) && !shouldSkipMarketCheck(ingredient.id, ingredient.name)) {\n    // Verificar si es un \"Don de\" o similar que no tiene precios en el mercado\n    if (ingredient.name.toLowerCase().startsWith('don de') || \n        ingredient.name.toLowerCase().includes('gift')) {\n      ingredient.setPrices(0, 0);\n    } else {\n      \n        try {\n          const prices = await getPrice(ingredient.id);\n          if (prices) {\n            ingredient.setPrices(prices.buy_price || 0, prices.sell_price || 0);\n          } else {\n            ingredient.setPrices(0, 0);\n          }\n        } catch (error) {\n          console.warn(`[ERROR] Error al cargar precios para ${ingredient.name} (${ingredient.id}):`, error.message);\n          ingredient.setPrices(0, 0);\n      }\n    }\n  }\n\n  // Procesar componentes hijos si existen\n  if (itemData.components && Array.isArray(itemData.components)) {\n    const results = await Promise.allSettled(\n      itemData.components.map(componentData => createIngredientTree3(componentData, ingredient))\n    );\n    results.forEach(r => {\n      if (r.status === 'fulfilled' && r.value) {\n        ingredient.addComponent(r.value);\n      }\n    });\n    return ingredient;\n  }\n\n  return ingredient;\n}\n\n// Importamos la API para usarla en esta función\n// Mapeo de materiales básicos, dones y precursores para legendarios\n// Fuente: https://wiki-es.guildwars2.com/wiki/Crep%C3%BAsculo\n\nconst BASIC_MATERIALS = {\n// === MATERIALES T6 ===\n24295: { name: 'Vial de sangre poderosa', type: 'crafting_material' },\n24283: { name: 'Vesícula de veneno poderoso', type: 'crafting_material' },\n24300: { name: 'Tótem elaborado', type: 'crafting_material' },\n24277: { name: 'Montón de polvo cristalino', type: 'crafting_material' },\n24351: { name: 'Colmillo feroz', type: 'crafting_material' },\n24289: { name: 'Escama blindada', type: 'crafting_material' },\n24357: { name: 'Garra despiadada', type: 'crafting_material' },\n24358: { name: 'Hueso antiguo', type: 'crafting_material' },\n19721: { name: 'Pegote de ectoplasma', type: 'crafting_material' }, // Añadido para asegurar el precio\n\n// === LEGENDARIOS ===\n30684: { name: 'Colmilloescarcha', type: 'legendary' },\n30687: { name: 'Incineradora', type: 'legendary' },\n30692: { name: 'El Festín', type: 'legendary' },\n30695: { name: 'Meteorológico', type: 'legendary' },\n30701: { name: 'Kraitkin', type: 'legendary' },\n30691: { name: 'Kamhoali\\'i Kotaki', type: 'legendary' },\n30697: { name: 'Frenesí', type: 'legendary' },\n30698: { name: 'El Bifrost', type: 'legendary' },\n30686: { name: 'El Soñador', type: 'legendary' },\n30694: { name: 'El Depredador', type: 'legendary' },\n30685: { name: 'Kudzu', type: 'legendary' },\n30690: { name: 'El Juggernaut', type: 'legendary' },\n30689: { name: 'Eternidad', type: 'legendary' },\n30703: { name: 'Amanecer', type: 'legendary' },\n30702: { name: 'Aullador', type: 'legendary' },\n30700: { name: 'Rodgort', type: 'legendary' },\n30696: { name: 'Las Profecías del Buscador de la Llama', type: 'legendary' },\n30688: { name: 'El Juglar', type: 'legendary' }, \n30699: { name: 'Haz', type: 'legendary' },\n30704: { name: 'Crepúsculo', type: 'legendary' },\n\n\n// === DONES ===\n19672: { name: 'Don del poder', type: 'account_bound' },\n19673: { name: 'Don de la magia', type: 'account_bound' },\n19677: { name: 'Don de la exploración', type: 'account_bound' },\n19678: { name: 'Don de la batalla', type: 'account_bound' },\n19664: { name: 'Don de Ascalon', type: 'account_bound' },\n19674: { name: 'Don del dominio', type: 'account_bound' },\n19648: { name: 'Don del Crepúsculo', type: 'crafting_material' },\n19621: { name: 'Don del metal', type: 'crafting_material' },\n19631: { name: 'Don de la oscuridad', type: 'crafting_material' },\n19626: { name: 'Don de la suerte', type: 'crafting_material' },\n19665: { name: 'Don del noble', type: 'crafting_material' },\n19635: { name: 'Don del entretenimiento', type: 'crafting_material' },\n19650: { name: 'Don del Festín', type: 'crafting_material' },\n19645: { name: 'Don de Incineradora', type: 'crafting_material' },\n19624: { name: 'Don del hielo', type: 'crafting_material' },\n19670: { name: 'Don del Santuario', type: 'crafting_material' },\n19657: { name: 'Don de Kamohoali\\'i Kotaki', type: 'crafting_material' },\n19669: { name: 'Don de Zhaitan', type: 'crafting_material' },\n19659: { name: 'Don del Frenesí', type: 'crafting_material' },\n19643: { name: 'Don del agua', type: 'crafting_material' },\n19638: { name: 'Don del color', type: 'crafting_material' },\n19654: { name: 'Don del Bifrost', type: 'crafting_material' },\n19660: { name: 'Don del Soñador', type: 'crafting_material' },\n19628: { name: 'Estatua de unicornio', type: 'crafting_material' },\n19667: { name: 'Don de las espinas', type: 'crafting_material' },\n19661: { name: 'Don del Depredador', type: 'crafting_material' },\n19671: { name: 'Don del conocimiento', type: 'crafting_material' },\n19636: { name: 'Don del sigilo', type: 'crafting_material' },\n19647: { name: 'Don del Amanecer', type: 'crafting_material' },\n19632: { name: 'Don de la luz', type: 'crafting_material' },\n19662: { name: 'Don de Aullador', type: 'crafting_material' },\n19627: { name: 'Don de la naturaleza', type: 'crafting_material' },\n19644: { name: 'Don de Kudzu', type: 'crafting_material' },\n19649: { name: 'Don del Juggernaut', type: 'crafting_material' },\n19625: { name: 'Don de Colmilloescarcha', type: 'crafting_material' },\n19651: { name: 'Don de Gracia', type: 'crafting_material' },\n19622: { name: 'Don de la madera', type: 'crafting_material' },\n19666: { name: 'Don del herrador', type: 'crafting_material' },\n19658: { name: 'Don de Kraitkin', type: 'crafting_material' },\n19623: { name: 'Don de la energía', type: 'crafting_material' },\n19656: { name: 'Don de Rodgort', type: 'crafting_material' },\n19653: { name: 'Don de Las Profecías del Buscador de la Llama', type: 'crafting_material' },\n19629: { name: 'Don de la historia', type: 'crafting_material' },\n19646: { name: 'Don del Juglar', type: 'crafting_material' },\n19630: { name: 'Don de la música', type: 'crafting_material' },\n19655: { name: 'Don de Haz', type: 'crafting_material' },\n19639: { name: 'Don del relámpago', type: 'crafting_material' },\n19652: { name: 'Don del Meteorológico', type: 'crafting_material' },\n19637: { name: 'Don del clima', type: 'crafting_material' },\n19641: { name: 'Estatua de tiburón', type: 'crafting_material' },\n\n  // === LINGOTES ===\n  19688: { name: 'Lingote de acero', type: 'crafting_material' },\n  19685: { name: 'Lingote de oricalco', type: 'crafting_material' },\n  19684: { name: 'Lingote de mithril', type: 'crafting_material' },\n  19683: { name: 'Lingote de hierro', type: 'crafting_material' },\n  19681: { name: 'Lingote de aceroscuro', type: 'crafting_material' },\n  19686: { name: 'Lingote de platino', type: 'crafting_material' },\n\n// === SELLOS ===\n24592: { name: 'Sello superior de vitalidad', type: 'upgrade_component' },\n24632: { name: 'Sello superior de veneno', type: 'upgrade_component' },\n24612: { name: 'Sello superior de agonía', type: 'upgrade_component' },\n24561: { name: 'Sello superior de rabia', type: 'upgrade_component' },\n24572: { name: 'Sello superior de invalidación', type: 'upgrade_component' },\n24571: { name: 'Sello superior de pureza', type: 'upgrade_component' },\n24615: { name: 'Sello superior de fuerza', type: 'upgrade_component' },\n24618: { name: 'Sello superior de precisión', type: 'upgrade_component' },\n24601: { name: 'Sello superior de batalla', type: 'upgrade_component' },\n24554: { name: 'Sello superior de aire', type: 'upgrade_component' },\n24584: { name: 'Sello superior de benevolencia', type: 'upgrade_component' },\n24562: { name: 'Sello superior de fortaleza', type: 'upgrade_component' },\n24865: { name: 'Sello superior de celeridad', type: 'upgrade_component' },\n24651: { name: 'Sello superior de sangre', id: 24570, type: 'upgrade_component' },\n24555: { name: 'Sello superior de hielo', type: 'upgrade_component' },\n24548: { name: 'Sello superior de fuego', type: 'upgrade_component' },\n24607: { name: 'Sello superior de energía', type: 'upgrade_component' },\n\n  // === PIEDRAS IMÁN ===\n  24310: { name: 'Piedra imán de ónice', type: 'crafting_material' },\n  24320: { name: 'Piedra imán glacial', type: 'crafting_material' },\n  24340: { name: 'Piedra imán corrupta', type: 'crafting_material' },\n  24315: { name: 'Piedra imán fundida', type: 'crafting_material' },\n  24325: { name: 'Piedra imán de destructor', type: 'crafting_material' },\n  24305: { name: 'Piedra imán cargada', type: 'crafting_material' },\n  \n\n  // === TABLAS DE MADERA ===\n  19709: { name: 'Tabla de madera ancestral', type: 'crafting_material' },\n  19711: { name: 'Tabla de madera sólida', type: 'crafting_material' },\n  19712: { name: 'Tabla de madera antigua', type: 'crafting_material' },\n  19714: { name: 'Tabla de madera curtida', type: 'crafting_material' },\n  19728: { name: 'Tabla de madera de arista', type: 'crafting_material' },\n\n  // === ORBES ===\n  24522: { name: 'Orbe de ópalo', type: 'crafting_material' },\n  24512: { name: 'Orbe de crisocola', type: 'crafting_material' },\n\n  // === POLVOS ===\n  24274: { name: 'Montón de polvo radiante', type: 'crafting_material' },\n  24276: { name: 'Montón de polvo incandescente', type: 'crafting_material' },\n  24275: { name: 'Montón de polvo luminoso', type: 'crafting_material' },\n  24277: { name: 'Montón de polvo cristalino', type: 'crafting_material' },\n\n  // === PRECURSORES ===\n  29183: { name: 'Veneno', type: 'weapon' },\n  29171: { name: 'Carcharias', type: 'weapon' },\n  29180: { name: 'La Leyenda', type: 'weapon' },\n  29178: { name: 'El Amante', type: 'weapon' },\n  29175: { name: 'El Cazador', type: 'weapon' },\n  29170: { name: 'El Coloso', type: 'weapon' },\n  29184: { name: 'Aullido', type: 'weapon' },\n  29177: { name: 'El Elegido', type: 'weapon' },\n  29168: { name: 'El Bardo', type: 'weapon' },\n  29181: { name: 'Zas', type: 'weapon' },\n  29176: { name: 'Tormenta', type: 'weapon' },\n  29172: { name: 'Hoja de Kudzu', type: 'weapon' },\n  29167: { name: 'Chispa', type: 'weapon' },\n  29166: { name: 'Diente de Colmilloescarcha', type: 'weapon' },\n  29173: { name: 'El Energizador', type: 'weapon' },\n  29174: { name: 'Pistola del Caos', type: 'weapon' },\n  29169: { name: 'Alba', type: 'weapon' },\n  29182: { name: 'Llama de Rodgort', type: 'weapon' },\n  29185: { name: 'Anochecer', type: 'weapon' },\n\n  \n  // === ESTATUAS ===\n  19642: { name: 'Estatua de anguila', type: 'crafting_material' },\n  19640: { name: 'Estatua de lobo', type: 'crafting_material' },\n  19628: { name: 'Estatua de unicornio', type: 'crafting_material' },\n\n\n  // === OTROS ===\n  12545: { name: 'Trufa orriana', type: 'crafting_material' },\n  12128: { name: 'Baya omnom', type: 'crafting_material' },\n  19732: { name: 'Trozos de cuero endurecido', type: 'crafting_material' },\n  19633: { name: 'Vial de azogue', type: 'crafting_material' },\n  19634: { name: 'Vial de llama líquida', type: 'crafting_material' },\n  20323: { name: 'Tinte sin identificar', type: 'crafting_material' },\n  19721: { name: 'Pegote de ectoplasma', type: 'crafting_material' },\n  19925: { name: 'Esquirla de obsidiana', type: 'crafting_material' },\n  20797: { name: 'Esquirla de hematites', type: 'crafting_material' },\n  20796: { name: 'Piedra filosofal', type: 'crafting_material' },\n  19976: { name: 'Moneda mística', type: 'crafting_material' },\n  19676: { name: 'Piedra rúnica helada', type: 'crafting_material' },\n  12544: { name: 'Chile fantasma', type: 'crafting_material' },\n  19746: { name: 'Haz de gasa', type: 'crafting_material' },\n  24502: { name: 'Doblón de plata', type: 'crafting_material' }, \n  19675: { name: 'Trébol místico', type: 'crafting_material' },\n  19737: { name: 'Retal de cuero curado endurecido', type: 'crafting_material' },\n  20000: { name: 'Caja de diversión', type: 'crafting_material' },\n};\n/**\n * Mapeo de ítems legendarios y sus componentes\n * Fuente: https://wiki-es.guildwars2.com/wiki/Crep%C3%BUsculo\n */\n\n// Árbol reutilizable: Don del dominio\nconst GIFT_OF_MASTERY_TREE = {\n  id: 19674,\n  name: 'Don del dominio',\n  type: 'account_bound',\n  count: 1,\n  components: [\n    { id: 19925, name: 'Esquirla de obsidiana', count: 250 },\n    { id: 20797, name: 'Esquirla de hematites', count: 1 },\n    { id: 19677, name: 'Don de la exploración', count: 1 },\n    { id: 19678, name: 'Don de la batalla', count: 1 }\n  ]\n};\n\n// Árbol reutilizable: Don de la suerte\nconst GIFT_OF_FORTUNE_TREE = {\n  id: 19626,\n  name: 'Don de la suerte',\n  type: 'crafting_material',\n  count: 1,\n  components: [\n    { id: 19721, name: 'Pegote de ectoplasma', count: 250 },\n    {\n      id: 19675,\n      name: 'Trébol místico',\n      type: 'account_bound',\n      count: 77,\n      components: [\n        { id: 19976, name: 'Moneda mística', count: 250 },\n        { id: 19721, name: 'Pegote de ectoplasma', count: 250 },\n        { id: 19925, name: 'Esquirla de obsidiana', count: 250 },\n        { id: 20796, name: 'Piedra filosofal', count: 1500 }\n      ]\n    },\n    {\n      id: 19673,\n      name: 'Don de la magia',\n      type: 'crafting_material',\n      count: 1,\n      components: [\n        { id: 24295, name: 'Vial de sangre poderosa', count: 250 },\n        { id: 24283, name: 'Vesícula de veneno poderoso', count: 250 },\n        { id: 24300, name: 'Tótem elaborado', count: 250 },\n        { id: 24277, name: 'Montón de polvo cristalino', count: 250 }\n      ]\n    },\n    {\n      id: 19672,\n      name: 'Don del poder',\n      type: 'crafting_material',\n      count: 1,\n      components: [\n        { id: 24351, name: 'Colmillo feroz', count: 250 },\n        { id: 24289, name: 'Escama blindada', count: 250 },\n        { id: 24357, name: 'Garra despiadada', count: 250 },\n        { id: 24358, name: 'Hueso antiguo', count: 250 }\n      ]\n    }\n  ]\n};\n\n// Incineradora - Daga legendaria Gen 1\nconst INCINERATOR_TREE = {\n  id: 30687, // ID de la Incineradora\n  name: 'Incineradora',\n  type: 'legendary',\n  components: [\n    GIFT_OF_MASTERY_TREE,\n    GIFT_OF_FORTUNE_TREE,\n    {\n      id: 19645, // Don de Incineradora\n      name: 'Don de Incineradora',\n      type: 'crafting_material',\n      count: 1,\n      components: [\n        { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n        { id: 24548, name: 'Sello superior de fuego', count: 1 },\n        {\n          id: 19621, // Don del metal\n          name: 'Don del metal',\n          type: 'crafting_material',\n          count: 1,\n          components: [\n            { id: 19685, name: 'Lingote de oricalco', count: 250 },\n            { id: 19684, name: 'Lingote de mithril', count: 250 },\n            { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n            { id: 19686, name: 'Lingote de platino', count: 250 }\n          ]\n        },\n        {\n          id: 19634, // Vial de llama líquida \n          name: 'Vial de llama líquida',\n          type: 'crafting_material',\n          count: 1,\n          components: [\n            { id: 19633, name: 'Vial de azogue', count: 1 },\n            { id: 12544, name: 'Chile fantasma', count: 250 },\n            { id: 24315, name: 'Piedra imán fundida', count: 100 },\n            { id: 24325, name: 'Piedra imán de destructor', count: 100 }\n          ]\n        }\n      ]\n    },\n    {\n      id: 29167, // Precursor - Chispa \n      name: 'Chispa',\n      type: 'weapon',\n      count: 1\n    }\n  ]\n};\n\nconst LEGENDARY_ITEMS = {\n  // El Festín - Maza legendaria Gen 1\n  30692: {\n    id: 30692,\n    name: 'El Festín',\n    type: 'legendary_mace',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19650,  // Don de El Festín\n        name: 'Don de El Festín',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24607, name: 'Sello superior de energía', count: 1 },\n          {\n            id: 19621,  // Don del metal\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19635,  // Don del entretenimiento\n            name: 'Don del entretenimiento',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19665, name: 'Don del noble', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19746, name: 'Haz de gasa', count: 250 },\n              { id: 20000, name: 'Caja de diversión', count: 5 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29173,  // Precursor - El Energizador\n        name: 'El Energizador (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n  \n  // Haz - Bastón legendario Gen 1\n  30699: {\n    id: 30699,\n    name: 'Haz',\n    type: 'legendary_staff',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19655,  // Don de Haz\n        name: 'Don de Haz',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24554, name: 'Sello superior de aire', count: 1 },\n          {\n            id: 19621,  // Don del metal\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19639,  // Don del relámpago\n            name: 'Don del relámpago',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19664, name: 'Don de Ascalon', count: 1 },\n              { id: 24305, name: 'Piedra imán cargada', count: 100 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19746, name: 'Haz de gasa', count: 250 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29181,  // Precursor - Zas\n        name: 'Zas (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n  \n  // Las Profecías del Buscador de la Llama - Foco legendario Gen 1\n  30696: {\n    id: 30696,\n    name: 'Las Profecías del Buscador de la Llama',\n    type: 'legendary_focus',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19653,  // Don de Las Profecías del Buscador de la Llama\n        name: 'Don de Las Profecías del Buscador de la Llama',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24601, name: 'Sello superior de batalla', count: 1 },\n          {\n            id: 19621,  // Don del metal\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19629,  // Don de la historia\n            name: 'Don de la historia',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19664, name: 'Don de Ascalon', count: 1 },\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 },\n              { id: 19732, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 24310, name: 'Piedra imán de ónice', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29177,  // Precursor - El Elegido\n        name: 'El Elegido (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n  \n  // El Juglar - Arco corto legendario Gen 1\n  30688: {\n    id: 30688,\n    name: 'El Juglar',\n    type: 'legendary_shortbow',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19646,  // Don del Juglar\n        name: 'Don del Juglar',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24607, name: 'Sello superior de energía', count: 1 },\n          {\n            id: 19623,  // Don de la energía\n            name: 'Don de la energía',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 },\n              { id: 24295, name: 'Montón de polvo incandescente', count: 250 },\n              { id: 24283, name: 'Montón de polvo luminoso', count: 250 },\n              { id: 24289, name: 'Montón de polvo radiante', count: 250 }\n            ]\n          },\n          {\n            id: 19630,  // Don de la música\n            name: 'Don de la música',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19665, name: 'Don del noble', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19746, name: 'Haz de gasa', count: 250 },\n              { id: 24502, name: 'Orbe de ópalo', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29184,  // Precursor - El Bardo\n        name: 'El Bardo (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n  \n  // El Meteorológico - Cetro legendario Gen 1\n  30695: {\n    id: 30695,\n    name: 'Meteorológico',\n    type: 'legendary_scepter',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19652,  // Don del Meteorológico\n        name: 'Don del Meteorológico',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24554, name: 'Sello superior de aire', count: 1 },\n          {\n            id: 19623,  // Don de la energía\n            name: 'Don de la energía',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 },\n              { id: 24295, name: 'Montón de polvo incandescente', count: 250 },\n              { id: 24283, name: 'Montón de polvo luminoso', count: 250 },\n              { id: 24289, name: 'Montón de polvo radiante', count: 250 }\n            ]\n          },\n          {\n            id: 19637,  // Don del clima\n            name: 'Don del clima',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19671, name: 'Don del conocimiento', count: 1 },\n              { id: 24305, name: 'Piedra imán cargada', count: 100 },\n              { id: 19732, name: 'Trozos de cuero endurecido', count: 250 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29176,  // Precursor - Tormenta\n        name: 'Tormenta (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n  \n  // Colmilloescarcha - Hacha legendaria Gen 1\n  30684: {\n    id: 30684,\n    name: 'Colmilloescarcha',\n    type: 'legendary_axe',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19625,\n        name: 'Don de Colmilloescarcha',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24555, name: 'Sello superior de hielo', count: 1 },\n          {\n            id: 19621,\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19624,\n            name: 'Don del hielo',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19670, name: 'Don del santuario', count: 1 },\n              { id: 24340, name: 'Piedra imán corrupta', count: 100 },\n              { id: 24320, name: 'Piedra imán glacial', count: 100 },\n              { id: 19685, name: 'Fragmento de oricalco', count: 250 },\n            ]\n          }\n        ]\n      },\n      {\n        id: 29166,\n        name: 'Diente de colmillo escarcha (precursora)',\n        type: 'precursor',\n        count: 1\n      }\n    ]\n  },\n  // Incineradora - Daga legendaria Gen 1\n  30687: INCINERATOR_TREE,\n\n  // El Bifrost - Bastón mágico legendario Gen 1\n  30698: {\n    id: 30698,\n    name: 'El Bifrost',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19654, // Don del Bifrost\n        name: 'Don del Bifrost',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24572, name: 'Sello superior de invalidación', count: 1 },\n          {\n            id: 19623, // Don de la energía\n            name: 'Don de la energía',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 24274, name: 'Montón de polvo radiante', count: 250 },\n              { id: 24275, name: 'Montón de polvo luminoso', count: 250 },\n              { id: 24276, name: 'Montón de polvo incandescente', count: 250 },\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 }\n            ]\n          },\n          {\n            id: 19638, // Don del color\n            name: 'Don del color',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19669, name: 'Don de Zhaitan', count: 1 },\n              { id: 24522, name: 'Orbe de ópalo', count: 100 },\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 },\n              { id: 20323, name: 'Tinte sin identificar', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29180, // La Leyenda (precursora)\n        name: 'La Leyenda (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // El Soñador - Arco corto legendario Gen 1\n  30686: {\n    id: 30686,\n    name: 'El Soñador',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19660, // Don del Soñador\n        name: 'Don del Soñador',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24571, name: 'Sello superior de pureza', count: 1 },\n          {\n            id: 19622, // Don de la madera\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19628, // Estatua de unicornio\n            name: 'Estatua de unicornio',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19667, name: 'Don de las espinas', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 24522, name: 'Orbe de ópalo', count: 100 },\n              { id: 24512, name: 'Orbe de crisocola', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29172, // El Amante (precursora)\n        name: 'El Amante (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // El Depredador - Rifle legendario Gen 1\n  30694: {\n    id: 30694,\n    name: 'El Depredador',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19661, // Don del Depredador\n        name: 'Don del Depredador',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24615, name: 'Sello superior de fuerza', count: 1 },\n          {\n            id: 19622, // Don de la madera\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19636, // Don del sigilo\n            name: 'Don del sigilo',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19671, name: 'Don del conocimiento', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 12512, name: 'Trufa orriana', count: 250 },\n              { id: 24310, name: 'Piedra imán de ónice', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29175, // El Cazador (precursora)\n        name: 'El Cazador (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // Kraitkin - Arpón legendario Gen 1\n  30701: {\n    id: 30701,\n    name: 'Kraitkin',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      // Don de Kraitkin\n      {\n        id: 19658,\n        name: 'Don de Kraitkin',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24632, name: 'Sello superior de veneno', count: 1 },\n          {\n            id: 19623,\n            name: 'Don de la energía',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 24277, name: 'Montón de polvo cristalino', count: 250 },\n              { id: 24276, name: 'Montón de polvo incandescente', count: 250 },\n              { id: 24275, name: 'Montón de polvo luminoso', count: 250 },\n              { id: 24274, name: 'Montón de polvo radiante', count: 250 }\n            ]\n          },\n          // Estatua de anguila\n          {\n            id: 19642,\n            name: 'Estatua de anguila',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19666, name: 'Don del herrador', count: 1 },\n              { id: 24289, name: 'Escama blindada', count: 250 },\n              { id: 19737, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 }\n            ]\n          }\n        ]\n      },\n      // Precursor: Veneno\n      { \n        id: 29183, \n        name: 'Veneno (precursora)',\n        type: 'weapon',\n        count: 1 \n      }\n    ]\n  },\n\n  // Kamohoali'i Kotaki - Arpón legendario Gen 1\n  30691: {\n    id: 30691,\n    name: 'Kamohoali\\'i Kotaki',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      // Don de Kamohoali'i Kotaki\n      {\n        id: 19657,\n        name: 'Don de Kamohoali\\'i Kotaki',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24612, name: 'Sello superior de agonía', count: 1 },\n          {\n            id: 19621,\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          // Estatua de tiburón\n          {\n            id: 19641,\n            name: 'Estatua de tiburón',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19669, name: 'Don de Zhaitan', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 24289, name: 'Escama blindada', count: 250 },\n              { id: 24295, name: 'Vial de sangre poderosa', count: 250 }\n            ]\n          }\n        ]\n      },\n      // Precursor: Carcharias\n      { \n        id: 29171, \n        name: 'Carcharias (precursora)',\n        type: 'weapon',\n        count: 1 \n      }\n    ]\n  },\n\n  // Frenesí - Daga legendaria Gen 1\n  30697: {\n    id: 30697,\n    name: 'Frenesí',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      // Don del Frenesí\n      {\n        id: 19659,\n        name: 'Don del Frenesí',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24561, name: 'Sello superior de rabia', count: 1 },\n          {\n            id: 19622,\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19643,\n            name: 'Don del agua',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19670, name: 'Don del Santuario', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 24315, name: 'Piedra imán fundida', count: 250 },\n              { id: 24320, name: 'Piedra imán glacial', count: 100 }\n            ]\n          }\n        ]\n      },\n      // Precursor: Rabia\n      { id: 29183, name: 'Veneno (precursora)',\n        type: 'weapon',\n        count: 1 }\n    ]\n  },\n  \n  // Kudzu - Arco largo legendario Gen 1\n  30685: {\n    id: 30685,\n    name: 'Kudzu',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19644, // Don de Kudzu\n        name: 'Don de Kudzu',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24865, name: 'Sello superior de celeridad', count: 1 },\n          {\n            id: 19622, // Don de la madera\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19627, // Don de la naturaleza\n            name: 'Don de la naturaleza',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19667, name: 'Don de las espinas', count: 1 },\n              { id: 12128, name: 'Baya omnom', count: 250 },\n              { id: 19737, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29171, // Hoja de Kudzu (precursora)\n        name: 'Hoja de Kudzu (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // El Juggernaut - Martillo legendario Gen 1\n  30690: {\n    id: 30690,\n    name: 'El Juggernaut',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19649, // Don del Juggernaut\n        name: 'Don del Juggernaut',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24584, name: 'Sello superior de benevolencia', count: 1 },\n          {\n            id: 19621, // Don del metal\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19633, // Vial de azogue\n            name: 'Vial de azogue',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19666, name: 'Don del herrador', count: 1 },\n              { id: 19688, name: 'Lingote de acero', count: 250 },\n              { id: 24315, name: 'Piedra imán fundida', count: 150 },\n              { id: 24502, name: 'Doblón de plata', count: 250 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29170, // El Coloso (precursora)\n        name: 'El Coloso (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // Amanecer - Espada legendaria Gen 1\n  30703: {\n    id: 30703,\n    name: 'Amanecer',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19647, // Don del Amanecer\n        name: 'Don del Amanecer',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24562, name: 'Sello superior de fortaleza', count: 1 },\n          {\n            id: 19621, // Don del metal\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 }\n            ]\n          },\n          {\n            id: 19632, // Don de la luz\n            name: 'Don de la luz',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19664, name: 'Don de Ascalon', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19737, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 24305, name: 'Piedra imán cargada', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29169, // Alba (precursora)\n        name: 'Alba (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // Aullador - Cuerno de guerra legendario Gen 1\n  30702: {\n    id: 30702,\n    name: 'Aullador',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19662, // Don de Aullador\n        name: 'Don de Aullador',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24618, name: 'Sello superior de precisión', count: 1 },\n          {\n            id: 19622, // Don de la madera\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19640, // Estatua de lobo\n            name: 'Estatua de lobo',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19667, name: 'Don de las espinas', count: 1 },\n              { id: 19737, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 24351, name: 'Colmillo feroz', count: 250 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29184, // Aullido (precursora)\n        name: 'Aullido (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // Rodgort - Báculo legendario Gen 1\n  30700: {\n    id: 30700,\n    name: 'Rodgort',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19656, // Don de Rodgort\n        name: 'Don de Rodgort',\n        type: 'crafting_material',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24548, name: 'Sello superior de fuego', count: 1 },\n          {\n            id: 19622, // Don de la madera\n            name: 'Don de la madera',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19712, name: 'Tabla de madera antigua', count: 250 },\n              { id: 19709, name: 'Tabla de madera ancestral', count: 250 },\n              { id: 19711, name: 'Tabla de madera sólida', count: 250 },\n              { id: 19714, name: 'Tabla de madera curtida', count: 250 }\n            ]\n          },\n          {\n            id: 19634, // Vial de llama líquida\n            name: 'Vial de llama líquida',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19629, name: 'Don de la historia', count: 1 },\n              { id: 12544, name: 'Chile fantasma', count: 250 },\n              { id: 24315, name: 'Piedra imán fundida', count: 100 },\n              { id: 24325, name: 'Piedra imán de destructor', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29182, // Llama de Rodgort (precursora)\n        name: 'Llama de Rodgort (precursora)',\n        type: 'weapon',\n        count: 1\n      }\n    ]\n  },\n\n  // Crepúsculo - Gran espada legendaria Gen 1\n  30704: {\n    id: 30704,\n    name: 'Crepúsculo',\n    type: 'legendary',\n    components: [\n      GIFT_OF_MASTERY_TREE,\n      GIFT_OF_FORTUNE_TREE,\n      {\n        id: 19648,\n        name: 'Don del Crepúsculo',\n        type: 'gift',\n        count: 1,\n        components: [\n          { id: 19676, name: 'Piedra rúnica helada', count: 100 },\n          { id: 24651, name: 'Sello superior de sangre', count: 1 },\n          {\n            id: 19621,\n            name: 'Don del metal',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19684, name: 'Lingote de mithril', count: 250 },\n              { id: 19681, name: 'Lingote de aceroscuro', count: 250 },\n              { id: 19686, name: 'Lingote de platino', count: 250 },\n            ]\n          },\n          {\n            id: 19631,\n            name: 'Don de la oscuridad',\n            type: 'crafting_material',\n            count: 1,\n            components: [\n              { id: 19664, name: 'Don de Ascalon', count: 1 },\n              { id: 19685, name: 'Lingote de oricalco', count: 250 },\n              { id: 19737, name: 'Retal de cuero curado endurecido', count: 250 },\n              { id: 24310, name: 'Piedra imán de ónice', count: 100 }\n            ]\n          }\n        ]\n      },\n      {\n        id: 29185,\n        name: 'Anochecer (precursora)',\n        type: 'precursor',\n        count: 1\n      }\n    ]\n  }\n};\n\n\n/**\n * Obtiene los datos de un ítem legendario\n */\nfunction getLegendaryItem(itemId) {\n  return LEGENDARY_ITEMS[itemId] || BASIC_MATERIALS[itemId] || null;\n}\n\n/**\n * Verifica si un ítem es legendario\n */\nfunction isLegendaryItem(itemId) {\n  return !!LEGENDARY_ITEMS[itemId];\n}\n\n/**\n * Verifica si un ítem es un material básico\n */\nfunction isBasicMaterial(itemId) {\n  return !!BASIC_MATERIALS[itemId];\n}\n// Materiales básicos para legendarias de 3ra generación\n// Basado en la legendaria Desgarro de Aurene\n\nconst BASIC_MATERIALS_3GEN = {\n\n// === DON DE JADE ===\n// === DON DE JADE ===\n96033: { name: 'Don de dominio de jade', type: 'crafting_material' },\n\n  // === MATERIALES DE JADE ===\n  97433: { name: 'Don del Imperio del Dragón', type: 'crafting_material' },\n  96722: { name: 'Piedra rúnica de jade', type: 'crafting_material' },\n  97102: { name: 'Pedazo de jade puro', type: 'crafting_material' },\n  96347: { name: 'Pedazo de ámbar gris antiguo', type: 'crafting_material' },\n  97829: { name: 'Bendición de la Emperatriz de Jade', type: 'account_bound' },\n\n  // === OTROS DE JADE===\n  20797: { name: 'Esquirla de hematites', type: 'crafting_material' },\n  96978: { name: 'Piedra de invocación vetusta', type: 'crafting_material' },\n\n  // === MATERIALES DON DE CANTHA ===\n  97096: { name: 'Don de Cantha', type: 'account_bound' },\n  96993: { name: 'Don de la Provincia de Seitung', type: 'account_bound' },\n  95621: { name: 'Don de la ciudad de Nueva Kaineng', type: 'account_bound' },\n  97232: { name: 'Don del Bosque Echovald', type: 'account_bound' },\n  96083: { name: 'Don de Muerte del Dragón', type: 'account_bound' },\n\n  // === DON DE DRACÓNICO ===\n  // === DON DE DRACÓNICO ===\n  96137: { name: 'Tributo dracónico', type: 'crafting_material' },\n\n  // === MATERIALES TRÉBOL ===\n  19675: { name: 'Trébol místico', type: 'crafting_material' },\n  19976: { name: 'Moneda mística', type: 'currency' },\n  19721: { name: 'Pegote de ectoplasma', type: 'crafting_material' },\n  19925: { name: 'Esquirla de obsidiana', type: 'crafting_material' },\n  20799: { name: 'Cristal místico', type: 'crafting_material' },\n  20796: { name: 'Piedra filosofal', type: 'crafting_material' },\n\n  // === DONES CONDENSADOS ===\n  // Poder\n  70867: { name: 'Don de poder condensado', type: 'account_bound' },\n  70801: { name: 'Don de garras', type: 'account_bound' },\n  75299: { name: 'Don de escamas', type: 'account_bound' },\n  71123: { name: 'Don de huesos', type: 'account_bound' },\n  75744: { name: 'Don de colmillos', type: 'account_bound' },\n  // Magia\n  76530: { name: 'Don de magia condensada', type: 'account_bound' },\n  71655: { name: 'Don de sangre', type: 'account_bound' },\n  71787: { name: 'Don de veneno', type: 'account_bound' },\n  73236: { name: 'Don de tótems', type: 'account_bound' },\n  73196: { name: 'Don de polvo', type: 'account_bound' },\n\n  // === OTROS DE DRACÓNICO===\n  92687: { name: 'Piedra imán dracónica amalgamada', type: 'crafting_material' },\n\n  // === DON DE AURENE CAMBIANTE ===\n  // === DON DE AURENE CAMBIANTE ===\n\n  71581: { name: 'Memoria de batalla', type: 'crafting_material' },\n  70820: { name: 'Esquirla de gloria', type: 'crafting_material' },\n  \n  // === MATERIALES DON DE INVESTIGACIÓN ===\n  97655: { name: 'Don de investigación', type: 'crafting_material' },\n  46747: { name: 'Reactivo termocatalítico', type: 'crafting_material' },\n  95813: { name: 'Reactivo hidrocatalítico', type: 'crafting_material' },\n  45178: { name: 'Esencia de la suerte exótica', type: 'currency' },\n\n  // === MATERIALES DON DE LA NIEBLA ===\n  76427: { name: 'Don de la niebla', type: 'account_bound' },\n  70528: { name: 'Don de gloria', type: 'account_bound' },\n  19678: { name: 'Don de la batalla', type: 'account_bound' },\n  71008: { name: 'Don de guerra', type: 'account_bound' },\n  73137: { name: 'Cubo de energía oscura estabilizada', type: 'crafting_material' },\n  71994: { name: 'Bola de energía oscura', type: 'crafting_material' },\n  73248: { name: 'Matriz estabilizadora', type: 'crafting_material' },\n\n  // === MATERIALES DE POEMA FIJO ===\n  96151: { name: 'Relato de aventura', type: 'crafting_material' },\n  97790: { name: 'Insignia de farolero', type: 'crafting_material' },\n  71148: { name: 'Hoja de papel supremo', type: 'crafting_material' },\n\n  // === POEMAS SEGUN ARMA ===\n  97160: { name: 'Poema sobre hachas', type: 'crafting_material' }, // Hacha\n  96187: { name: 'Poema sobre dagas', type: 'crafting_material' }, // Daga\n  96035: { name: 'Poema sobre mazas', type: 'crafting_material' }, // Maza\n  95809: { name: 'Poema sobre pistolas', type: 'crafting_material' }, // Pistola\n  96173: { name: 'Poema sobre cetros', type: 'crafting_material' }, // Cetro\n  97335: { name: 'Poema sobre espadas', type: 'crafting_material' }, // Espada\n  96951: { name: 'Poema sobre focos', type: 'crafting_material' }, // Foco\n  95740: { name: 'Poema sobre escudos', type: 'crafting_material' }, // Escudo\n  97257: { name: 'Poema sobre antorchas', type: 'crafting_material' }, // Antorcha\n  96341: { name: 'Poema sobre cuernos de guerra', type: 'crafting_material' }, // Cuerno de guerra\n  96036: { name: 'Poema sobre mandobles', type: 'crafting_material' }, // Mandoble\n  97082: { name: 'Poema sobre martillos', type: 'crafting_material' }, // Martillo\n  97800: { name: 'Poema sobre arcos largos', type: 'crafting_material' }, // Arco largo\n  97201: { name: 'Poema sobre rifles', type: 'crafting_material' }, // Rifle\n  96849: { name: 'Poema sobre arcos cortos', type: 'crafting_material' }, // Arco corto\n  95962: { name: 'Poema sobre bastones', type: 'crafting_material' }, // Báculo\n  \n  // === OTROS AURENE FIJOS===\n  79418: { name: 'Piedra rúnica mística', type: 'crafting_material' },\n\n// === MATERIALES ORDENADOS POR TIPO DE ARMA ===\n45845: { name: 'Filo para hacha de acero de Deldrimor', type: 'crafting_material' },          // Hacha\n45846: { name: 'Filo para daga de acero de Deldrimor', type: 'crafting_material' },           // Daga\n45852: { name: 'Cabeza para maza de acero de Deldrimor', type: 'crafting_material' },         // Maza\n45833: { name: 'Cañón para pistola de acero de Deldrimor', type: 'crafting_material' },       // Pistola\n45885: { name: 'Núcleo para cetro de madera espiritual', type: 'crafting_material' },         // Cetro\n45848: { name: 'Filo para espada de acero de Deldrimor', type: 'crafting_material' },         // Espada\n45884: { name: 'Núcleo para foco de madera espiritual', type: 'crafting_material' },          // Foco\n45858: { name: 'Umbo para escudo de acero de Deldrimor', type: 'crafting_material' },         // Escudo\n45838: { name: 'Cabezal para antorcha de acero de Deldrimor', type: 'crafting_material' },    // Antorcha\n45839: { name: 'Cuerno de acero de Deldrimor', type: 'crafting_material' },                   // Cuerno de guerra\n45847: { name: 'Filo para mandoble de acero de Deldrimor', type: 'crafting_material' },       // Mandoble\n45851: { name: 'Cabeza para martillo de acero de Deldrimor', type: 'crafting_material' },     // Martillo\n45841: { name: 'Duela para arco largo de madera espiritual', type: 'crafting_material' },     // Arco largo\n45834: { name: 'Cañón para rifle de acero de Deldrimor', type: 'crafting_material' },         // Rifle\n45842: { name: 'Duela para arco corto de madera espiritual', type: 'crafting_material' },     // Arco corto\n45887: { name: 'Cabezal para báculo de madera espiritual', type: 'crafting_material' },        // Báculo\n\n\n// === PRECURSORES ORDENADOS ===\n97449: { name: 'Desgarro Dracónico (precursora)', type: 'weapon' }, // Hacha\n95967: { name: 'Garra Dracónica (precursora)', type: 'weapon' }, // Daga\n96827: { name: 'Cola Dracónica (precursora)', type: 'weapon' }, // Maza\n96915: { name: 'Razonamiento Dracónico (precursora)', type: 'weapon' }, // Pistola\n96193: { name: 'Sabiduría Dracónica (precursora)', type: 'weapon' }, // Cetro\n95994: { name: 'Colmillo Dracónico (precursora)', type: 'weapon' }, // Espada\n96303: { name: 'Mirada Dracónica (precursora)', type: 'weapon' }, // Foco\n97691: { name: 'Escama Dracónica (precursora)', type: 'weapon' }, // Escudo\n96925: { name: 'Aliento Dracónico (precursora)', type: 'weapon' }, // Antorcha\n97513: { name: 'Voz Dracónica (precursora)', type: 'weapon' }, // Cuerno de guerra\n96357: { name: 'Mordisco Dracónico (precursora)', type: 'weapon' }, // Mandoble\n95920: { name: 'Peso Dracónico (precursora)', type: 'weapon' }, // Martillo\n95834: { name: 'Vuelo Dracónico (precursora)', type: 'weapon' }, // Arco largo\n97267: { name: 'Persuasión Dracónica (precursora)', type: 'weapon' }, // Rifle\n96330: { name: 'Ala Dracónica (precursora)', type: 'weapon' }, // Arco corto\n95814: { name: 'Reflexión Dracónica (precursora)', type: 'weapon' }, // Báculo\n\n\n// === LEGENDARIAS ORDENADAS ===\n96937: { name: 'Desgarro de Aurene', type: 'legendary' }, // Hacha\n96203: { name: 'Garra de Aurene', type: 'legendary' }, // Daga\n95612: { name: 'Cola de Aurene', type: 'legendary' }, // Maza\n95808: { name: 'Razonamiento de Aurene', type: 'legendary' }, // Pistola\n96221: { name: 'Sabiduría de Aurene', type: 'legendary' }, // Cetro\n95675: { name: 'Colmillo de Aurene', type: 'legendary' }, // Espada\n97165: { name: 'Mirada de Aurene', type: 'legendary' }, // Foco\n96028: { name: 'Escama de Aurene', type: 'legendary' }, // Escudo\n97099: { name: 'Aliento de Aurene', type: 'legendary' }, // Antorcha\n97783: { name: 'Voz de Aurene', type: 'legendary' }, // Cuerno de guerra\n96356: { name: 'Mordisco de Aurene', type: 'legendary' }, // Mandoble\n95684: { name: 'Peso de Aurene', type: 'legendary' }, // Martillo\n97590: { name: 'Vuelo de Aurene', type: 'legendary' }, // Arco largo\n97377: { name: 'Persuasión de Aurene', type: 'legendary' }, // Rifle\n97077: { name: 'Ala de Aurene', type: 'legendary' }, // Arco corto\n96652: { name: 'Reflexión de Aurene', type: 'legendary' }, // Báculo\n\n\n  \n  // ====================\n  // === MATERIALES T6 ===\n  24295: { name: 'Vial de sangre poderosa', type: 'crafting_material' },\n  24283: { name: 'Vesícula de veneno poderoso', type: 'crafting_material' },\n  24300: { name: 'Tótem elaborado', type: 'crafting_material' },\n  24277: { name: 'Montón de polvo cristalino', type: 'crafting_material' },\n  24357: { name: 'Colmillo feroz', type: 'crafting_material' },\n  24289: { name: 'Escama blindada', type: 'crafting_material' },\n  24351: { name: 'Garra despiadada', type: 'crafting_material' },\n  24358: { name: 'Hueso antiguo', type: 'crafting_material' },\n\n  // === MATERIALES T5 ===\n  24294: { name: 'Vial de sangre potente', type: 'crafting_material' },\n  24282: { name: 'Vesícula de veneno potente', type: 'crafting_material' },\n  24299: { name: 'Tótem intrincado', type: 'crafting_material' },\n  24276: { name: 'Montón de polvo incandescente', type: 'crafting_material' },\n  24356: { name: 'Colmillo grande', type: 'crafting_material' },\n  24288: { name: 'Escama grande', type: 'crafting_material' },\n  24350: { name: 'Garra grande', type: 'crafting_material' },\n  24341: { name: 'Hueso grande', type: 'crafting_material' },\n\n  // === MATERIALES T4 ===\n  24293: { name: 'Vial de sangre espesa', type: 'crafting_material' },\n  24281: { name: 'Vesícula de veneno llena', type: 'crafting_material' },\n  24298: { name: 'Tótem grabado', type: 'crafting_material' },\n  24275: { name: 'Montón de polvo luminoso', type: 'crafting_material' },\n  24355: { name: 'Colmillo afilado', type: 'crafting_material' },\n  24287: { name: 'Escama suave', type: 'crafting_material' },\n  24349: { name: 'Garra afilada', type: 'crafting_material' },\n  24345: { name: 'Hueso pesado', type: 'crafting_material' },\n\n  // === MATERIALES T3 ===\n  24292: { name: 'Vial de sangre', type: 'crafting_material' },\n  24280: { name: 'Vesícula de veneno', type: 'crafting_material' },\n  24297: { name: 'Tótem', type: 'crafting_material' },\n  24274: { name: 'Montón de polvo radiante', type: 'crafting_material' },\n  24354: { name: 'Colmillo', type: 'crafting_material' },\n  24286: { name: 'Escama', type: 'crafting_material' },\n  24348: { name: 'Garra', type: 'crafting_material' },\n  24344: { name: 'Hueso', type: 'crafting_material' }\n\n\n};\n/**\n * Mapeo de ítems legendarios de tercera generación y sus componentes\n * Basado en la estructura de Desgarro de Aurene\n */\n\n// Importar materiales básicos de 3ra generación\n\n// === ÁRBOLES REUTILIZABLES ===\n\n// Don de dominio de jade (reutilizable)\nconst GIFT_OF_JADE_MASTERY_TREE = {\n  id: 96033,\n  name: 'Don de dominio de jade',\n  type: 'crafting_material',\n  count: 1,\n  components: [\n    { \n      id: 97433, \n      name: 'Don del Imperio del Dragón', \n      count: 1,\n      components: [\n        { id: 96722, name: 'Piedra rúnica de jade', count: 100 },\n        { id: 97102, name: 'Pedazo de jade puro', count: 200 },\n        { id: 96347, name: 'Pedazo de ámbar gris antiguo', count: 100 },\n        { id: 97829, name: 'Bendición de la Emperatriz de Jade', count: 5, type: 'account_bound' }\n      ]\n    },\n    { id: 20797, name: 'Esquirla de hematites', count: 200 },\n    { \n      id: 97096, \n      name: 'Don de Cantha',\n      type: 'account_bound',\n      count: 1,\n      components: [\n        { id: 96993, name: 'Don de la Provincia de Seitung', count: 1, type: 'account_bound' },\n        { id: 95621, name: 'Don de la ciudad de Nueva Kaineng', count: 1, type: 'account_bound' },\n        { id: 97232, name: 'Don del Bosque Echovald', count: 1, type: 'account_bound' },\n        { id: 96083, name: 'Don de Muerte del Dragón', count: 1, type: 'account_bound' }\n      ]\n    },\n    { id: 96978, name: 'Piedra de invocación vetusta', count: 100 }\n  ]\n};\n\n// Tributo dracónico (reutilizable)\nconst DRACONIC_TRIBUTE_TREE = {\n  id: 96137,\n  name: 'Tributo dracónico',\n  type: 'crafting_material',\n  count: 1,\n  components: [\n    { \n      id: 19675,\n      name: 'Trébol místico',\n      type: 'account_bound',\n      count: 38,\n      components: [\n        { id: 19976, name: 'Moneda mística', count: 38 },\n        { id: 19721, name: 'Pegote de ectoplasma', count: 38 },\n        { id: 19925, name: 'Esquirla de obsidiana', count: 38 },\n        { id: 20799, name: 'Cristal místico', count: 38 }\n      ]\n    },\n    { id: 92687, name: 'Piedra imán dracónica amalgamada', count: 5 },\n    { \n      id: 70867,\n      name: 'Don de poder condensado',\n      type: 'account_bound',\n      count: 1,\n      components: [\n        {\n          id: 70801,\n          name: 'Don de garras',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24351, name: 'Garra despiadada', count: 50 },\n            { id: 24350, name: 'Garra grande', count: 250 },\n            { id: 24349, name: 'Garra afilada', count: 50 },\n            { id: 24348, name: 'Garra', count: 50 }\n          ]\n        },\n        {\n          id: 75299,\n          name: 'Don de escamas',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24289, name: 'Escama blindada', count: 50 },\n            { id: 24288, name: 'Escama grande', count: 250 },\n            { id: 24287, name: 'Escama suave', count: 50 },\n            { id: 24286, name: 'Escama', count: 50 }\n          ]\n        },\n        {\n          id: 71123,\n          name: 'Don de huesos',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24358, name: 'Hueso antiguo', count: 50 },\n            { id: 24341, name: 'Hueso grande', count: 250 },\n            { id: 24345, name: 'Hueso pesado', count: 50 },\n            { id: 24344, name: 'Hueso', count: 50 }\n          ]\n        },\n        {\n          id: 75744,\n          name: 'Don de colmillos',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24357, name: 'Colmillo feroz', count: 50 },\n            { id: 24356, name: 'Colmillo grande', count: 250 },\n            { id: 24355, name: 'Colmillo afilado', count: 50 },\n            { id: 24354, name: 'Colmillo', count: 50 }\n          ]\n        }\n      ]\n    },\n    { \n      id: 76530,\n      name: 'Don de magia condensada',\n      type: 'account_bound',\n      count: 1,\n      components: [\n        {\n          id: 71655,\n          name: 'Don de sangre',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24295, name: 'Vial de sangre poderosa', count: 100 },\n            { id: 24294, name: 'Vial de sangre potente', count: 250 },\n            { id: 24293, name: 'Vial de sangre espesa', count: 50 },\n            { id: 24292, name: 'Vial de sangre', count: 50 }\n          ]\n        },\n        {\n          id: 71787,\n          name: 'Don de veneno',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24283, name: 'Vesícula de veneno poderoso', count: 100 },\n            { id: 24282, name: 'Vesícula de veneno potente', count: 250 },\n            { id: 24281, name: 'Vesícula de veneno llena', count: 50 },\n            { id: 24280, name: 'Vesícula de veneno', count: 50 }\n          ]\n        },\n        {\n          id: 73236,\n          name: 'Don de tótems',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24300, name: 'Tótem elaborado', count: 100 },\n            { id: 24299, name: 'Tótem intrincado', count: 250 },\n            { id: 24298, name: 'Tótem grabado', count: 50 },\n            { id: 24297, name: 'Tótem', count: 50 }\n          ]\n        },\n        {\n          id: 73196,\n          name: 'Don de polvo',\n          type: 'account_bound',\n          count: 1,\n          components: [\n            { id: 24277, name: 'Montón de polvo cristalino', count: 100 },\n            { id: 24276, name: 'Montón de polvo incandescente', count: 250 },\n            { id: 24275, name: 'Montón de polvo luminoso', count: 50 },\n            { id: 24274, name: 'Montón de polvo radiante', count: 50 }\n          ]\n        }\n      ]\n    }\n  ]\n};\n\n// Estructura base del Don de Aurene (compartida entre todas las armas)\nconst GIFT_OF_AURENE_BASE = {\n  type: 'account_bound',\n  count: 1,\n  components: [\n    // El poema se inyectará aquí\n    { id: 79418, name: 'Piedra rúnica mística', count: 100, type: 'crafting_material' },\n    { \n      id: 97655,\n      name: 'Don de Investigación',\n      type: 'account_bound',\n      count: 1,\n      components: [\n        { id: 46747, name: 'Reactivo termocatalítico', count: 250, type: 'crafting_material' },\n        { id: 95813, name: 'Reactivo hidrocatalítico', count: 250, type: 'crafting_material' },\n        { id: 45178, name: 'Esencia de la suerte exótica', count: 250, type: 'currency' }\n      ]\n    },\n    { \n      id: 76427,\n      name: 'Don de la Niebla',\n      type: 'account_bound',\n      count: 1,\n      components: [\n        { \n  id: 70528, \n  name: 'Don de gloria', \n  count: 1, \n  type: 'account_bound',\n  components: [\n    { id: 70820, name: 'Esquirla de gloria', count: 250, type: 'crafting_material' }\n  ]\n},\n        { id: 19678, name: 'Don de la batalla', count: 1, type: 'account_bound' },\n        { \n  id: 71008, \n  name: 'Don de guerra', \n  count: 1, \n  type: 'account_bound',\n  components: [\n    { id: 71581, name: 'Memoria de batalla', count: 250, type: 'crafting_material' }\n  ]\n},\n        { \n          id: 73137,\n          name: 'Cubo de energía oscura estabilizada',\n          type: 'crafting_material',\n          count: 1,\n          components: [\n            { id: 71994, name: 'Bola de energía oscura', count: 1, type: 'crafting_material' },\n            { id: 73248, name: 'Matriz estabilizadora', count: 75, type: 'crafting_material' }\n          ]\n        }\n      ]\n    }\n  ]\n};\n\n// Función auxiliar para obtener el tipo de arma basado en su nombre\nfunction getWeaponType(weaponName) {\n  const weaponTypes = {\n    'hacha': ['hacha', 'desgarro'],\n    'daga': ['daga', 'garra'],\n    'maza': ['maza', 'cola'],\n    'pistola': ['pistola', 'razonamiento'],\n    'cetro': ['cetro', 'sabiduría'],\n    'espada': ['espada', 'colmillo'],\n    'foco': ['foco', 'mirada'],\n    'escudo': ['escudo', 'escama'],\n    'antorcha': ['antorcha', 'aliento'],\n    'cuerno': ['cuerno', 'voz'],\n    'mandoble': ['mandoble', 'mordisco'],\n    'martillo': ['martillo', 'peso'],\n    'arco_largo': ['arco largo', 'vuelo'],\n    'rifle': ['rifle', 'persuasión'],\n    'arco_corto': ['arco corto', 'ala'],\n    'baston': ['báculo', 'reflexión']\n  };\n\n  const lowerName = weaponName.toLowerCase();\n  for (const [type, keywords] of Object.entries(weaponTypes)) {\n    if (keywords.some(keyword => lowerName.includes(keyword))) {\n      return type;\n    }\n  }\n  return 'desconocido';\n}\n\n// Función auxiliar para obtener el nombre del material por su ID\nfunction getMaterialName(materialId) {\n  return BASIC_MATERIALS_3GEN[materialId]?.name || `Material ${materialId}`;\n}\n\n// Función para crear el poema específico de cada arma\nconst createWeaponPoem = (weaponId, weaponName, weaponMaterialId) => {\n  // Mapeo de tipos de arma a IDs de poema\n  const POEM_IDS = {\n    'hacha': 97160,\n    'daga': 96187,\n    'maza': 96035,\n    'pistola': 95809,\n    'cetro': 96173,\n    'espada': 97335,\n    'foco': 96951,\n    'escudo': 95740,\n    'antorcha': 97257,\n    'cuerno': 96341,\n    'mandoble': 96036,\n    'martillo': 97082,\n    'arco_largo': 97800,\n    'rifle': 97201,\n    'arco_corto': 96849,\n    'baston': 95962\n  };\n\n  // Obtener el ID del poema basado en el tipo de arma\n  const weaponType = getWeaponType(weaponName);\n  const poemId = POEM_IDS[weaponType] || 0;\n\n  return {\n    id: poemId,\n    name: `Poema sobre ${weaponName}`,\n    type: 'account_bound',\n    count: 1,\n    components: [\n      { id: 96151, name: 'Relato de aventura', count: 10, type: 'crafting_material' },\n      { id: 97790, name: 'Insignia de farolero', count: 10, type: 'crafting_material' },\n      { id: weaponMaterialId, name: getMaterialName(weaponMaterialId), count: 1, type: 'crafting_material' },\n      { id: 71148, name: 'Hoja de papel supremo', count: 1, type: 'crafting_material' }\n    ]\n  };\n};\n\n// Función principal para crear el don de un arma específica\nconst createGiftOfAurenesRendering = (weaponId, weaponName, weaponMaterialId) => {\n  // Crear una copia profunda del objeto base\n  const gift = JSON.parse(JSON.stringify(GIFT_OF_AURENE_BASE));\n  \n  // Configurar propiedades específicas del arma\n  gift.id = weaponId;\n  gift.name = `Don de ${weaponName}`;\n  \n  // Insertar el poema específico del arma al inicio de los componentes\n  gift.components.unshift(createWeaponPoem(weaponId, weaponName, weaponMaterialId));\n  \n  return gift;\n};\n\n// Mapeo de armas a sus IDs de material y precursora\nconst WEAPON_DATA = {\n  // Hacha\n  'Desgarro de Aurene': { id: 96937, materialId: 45845, precursorId: 97449 },\n  // Daga\n  'Garra de Aurene': { id: 96203, materialId: 45846, precursorId: 95967 },\n  // Maza\n  'Cola de Aurene': { id: 95612, materialId: 45852, precursorId: 96827 },\n  // Pistola\n  'Razonamiento de Aurene': { id: 95808, materialId: 45833, precursorId: 96915 },\n  // Cetro\n  'Sabiduría de Aurene': { id: 96221, materialId: 45885, precursorId: 96193 },\n  // Espada\n  'Colmillo de Aurene': { id: 95675, materialId: 45848, precursorId: 95994 },\n  // Foco\n  'Mirada de Aurene': { id: 97165, materialId: 45884, precursorId: 96303 },\n  // Escudo\n  'Escama de Aurene': { id: 96028, materialId: 45858, precursorId: 97691 },\n  // Antorcha\n  'Aliento de Aurene': { id: 97099, materialId: 45838, precursorId: 96925 },\n  // Cuerno de guerra\n  'Voz de Aurene': { id: 97783, materialId: 45839, precursorId: 97513 },\n  // Mandoble\n  'Mordisco de Aurene': { id: 96356, materialId: 45847, precursorId: 96357 },\n  // Martillo\n  'Peso de Aurene': { id: 95684, materialId: 45851, precursorId: 95920 },\n  // Arco largo\n  'Vuelo de Aurene': { id: 97590, materialId: 45841, precursorId: 95834 },\n  // Rifle\n  'Persuasión de Aurene': { id: 97377, materialId: 45834, precursorId: 97267 },\n  // Arco corto\n  'Ala de Aurene': { id: 97077, materialId: 45842, precursorId: 96330 },\n  // Báculo\n  'Reflexión de Aurene': { id: 96652, materialId: 45887, precursorId: 95814 }\n};\n\n// Función para crear la entrada de un arma legendaria\nconst createLegendaryWeapon = (weaponName) => {\n  const data = WEAPON_DATA[weaponName];\n  if (!data) return null;\n  \n  return {\n    id: data.id,\n    name: weaponName,\n    type: 'legendary',\n    components: [\n      { ...GIFT_OF_JADE_MASTERY_TREE },\n      { ...DRACONIC_TRIBUTE_TREE },\n      createGiftOfAurenesRendering(data.id, weaponName, data.materialId),\n      { \n        id: data.precursorId, \n        name: `${weaponName.replace(' de Aurene', ' Dracónic' + (weaponName.endsWith('a') ? 'a' : 'o'))} (precursora)`, \n        type: 'weapon' \n      }\n    ]\n  };\n};\n\n// Objeto principal de ítems legendarios de 3ra generación\nconst LEGENDARY_ITEMS_3GEN = Object.fromEntries(\n  Object.keys(WEAPON_DATA).map(weaponName => {\n    const weapon = createLegendaryWeapon(weaponName);\n    return [weapon.id, weapon];\n  })\n);\n\n// Funciones de utilidad\nfunction getLegendary3GenItem(itemId) {\n  return LEGENDARY_ITEMS_3GEN[itemId] || null;\n}\n\nfunction isLegendary3GenItem(itemId) {\n  return itemId in LEGENDARY_ITEMS_3GEN;\n}\n\nfunction isBasic3GenMaterial(itemId) {\n  // Depuración para Vial de sangre espesa\n  if (itemId === 24293) {\n  }\n  return String(itemId) in BASIC_MATERIALS_3GEN;\n}\n// Shared logic for legendary crafting apps\n\nclass LegendaryCraftingBase {\n  constructor(config) {\n    this.getItemById = config.getItemById;\n    this.items = config.items || [];\n    this.createIngredientTree = config.createIngredientTree;\n    this.isBasicMaterial = config.isBasicMaterial || (() => false);\n    this.quickLoadButtons = config.quickLoadButtons || {};\n    // Opcional: lista de textos personalizados para reemplazar precios de ciertos materiales\n    // Cada entrada puede definir un nombre exacto y palabras clave para coincidencias flexibles\n    // {\n    //   name: 'Esquirla de obsidiana',\n    //   display: 'Se compra con karma o laureles',\n    //   keywords: ['obsidiana']\n    // }\n    this.customPriceTexts = config.customPriceTexts || [];\n    const ids = config.elementIds || {};\n    this.craftingTreeEl = document.getElementById(ids.craftingTree);\n    this.skeletonEl = ids.skeleton ? document.getElementById(ids.skeleton) : null;\n    this.summaryEl = document.getElementById(ids.summary);\n    this.summaryContentEl = document.getElementById(ids.summaryContent);\n    this.loadTreeBtn = ids.loadTree ? document.getElementById(ids.loadTree) : null;\n    this.clearCacheBtn = ids.clearCache ? document.getElementById(ids.clearCache) : null;\n    this.itemIdInput = ids.itemIdInput ? document.getElementById(ids.itemIdInput) : null;\n    this.itemNameInput = ids.itemNameInput ? document.getElementById(ids.itemNameInput) : null;\n\n    this.currentTree = null;\n    this.isLoading = false;\n    this.activeButton = null;\n    this.workerTotals = { totalBuy: 0, totalSell: 0, totalCrafted: 0 };\n\n    this.calculateComponentsPrice = this.calculateComponentsPrice.bind(this);\n    this.initializeEventListeners();\n  }\n\n  _setActiveButton(button) {\n    document.querySelectorAll('.item-tab-btn-treeleg').forEach(btn => btn.classList.remove('active'));\n    if (button) {\n      button.classList.add('active');\n      this.activeButton = button;\n    } else {\n      this.activeButton = null;\n    }\n  }\n\n  _findButtonIdByItemId(itemId) {\n    const itemIdStr = String(itemId);\n    const entry = Object.entries(this.quickLoadButtons).find(([_, d]) => d.itemId === itemIdStr);\n    return entry ? entry[0] : null;\n  }\n\n  _handleQuickLoad(buttonId) {\n    const button = document.getElementById(buttonId);\n    if (!button) return;\n    const data = this.quickLoadButtons[buttonId];\n    if (!data) return;\n    if (this.itemIdInput) this.itemIdInput.value = data.itemId;\n    if (this.itemNameInput) this.itemNameInput.value = data.itemName || '';\n    this._setActiveButton(button);\n    this.loadItem({ itemId: data.itemId });\n  }\n\n  initializeEventListeners() {\n    if (this.loadTreeBtn) {\n      this.loadTreeBtn.addEventListener('click', () => {\n        this._setActiveButton(null);\n        this.loadItem({ itemId: this.itemIdInput?.value, itemName: this.itemNameInput?.value });\n      });\n    }\n\n    if (this.clearCacheBtn) {\n      this.clearCacheBtn.addEventListener('click', () => {\n        this.clearCache();\n        this._setActiveButton(null);\n      });\n    }\n\n    Object.keys(this.quickLoadButtons).forEach(id => {\n      const btn = document.getElementById(id);\n      if (btn) btn.addEventListener('click', () => this._handleQuickLoad(id));\n    });\n  }\n\n  async updateTotals() {\n    if (!this.currentTree) return;\n    try {\n      const adapted = adaptIngredientForWorker(this.currentTree);\n      const treeForWorker = [adapted];\n      treeForWorker.forEach(_mapQtyToCount);\n      const { updatedTree, totals } = await runCostsWorker(treeForWorker, 1);\n      if (Array.isArray(updatedTree) && updatedTree[0]) {\n        applyWorkerData(updatedTree[0], this.currentTree);\n      }\n      this.workerTotals = totals || { totalBuy: 0, totalSell: 0, totalCrafted: 0 };\n    } catch (e) {\n      console.warn('costsWorker no disponible, usando cálculo local', e);\n      const fallback = this.currentTree.calculateTotals();\n      this.workerTotals = {\n        totalBuy: fallback.buy || 0,\n        totalSell: fallback.sell || 0,\n        totalCrafted: fallback.buy || 0\n      };\n    }\n  }\n\n  async loadItem({ itemId, itemName }) {\n    const id = parseInt(itemId);\n    const name = itemName ? itemName.toLowerCase() : '';\n    if (!id && !name) {\n      this.showError('Por favor ingresa un ID o nombre de ítem válido');\n      return;\n    }\n\n      this.setLoading(true);\n\n    try {\n      let itemData = null;\n      if (id) itemData = this.getItemById(id);\n      if (!itemData && name) {\n        itemData = this.items.find(i => i.name.toLowerCase() === name);\n      }\n      if (!itemData) throw new Error(`No se encontró información local para el ítem: ${itemName || itemId}`);\n\n      if (this.itemIdInput && itemData.id) this.itemIdInput.value = itemData.id;\n      const buttonId = this._findButtonIdByItemId(itemData.id);\n        if (buttonId) {\n          const button = document.getElementById(buttonId);\n          this._setActiveButton(button);\n        } else {\n          this._setActiveButton(null);\n        }\n\n        this.currentTree = await this.createIngredientTree(itemData);\n        await this.updateTotals();\n      await this.renderTree();\n      this.renderSummary();\n    } catch (error) {\n      console.error('Error al cargar el árbol:', error);\n      this.showError(`Error: ${error.message}`);\n    } finally {\n      this.setLoading(false);\n    }\n  }\n\n    async renderTree() {\n      if (!this.currentTree || !this.craftingTreeEl) return;\n      this.craftingTreeEl.innerHTML = '';\n      try {\n        await this.renderIngredient(this.currentTree, this.craftingTreeEl);\n        this.summaryEl.style.display = 'block';\n      } catch (error) {\n      console.error('Error al renderizar el árbol de crafteo:', error);\n      this.craftingTreeEl.innerHTML = `\n        <div class=\"error\">\n          <p>Error al cargar el árbol de crafteo. Por favor, inténtalo de nuevo.</p>\n          <button id=\"retry-load-tree\" class=\"btn\">Reintentar</button>\n        </div>`;\n      const retryBtn = document.getElementById('retry-load-tree');\n      if (retryBtn) retryBtn.addEventListener('click', () => this.loadItem({ itemId: this.itemIdInput?.value, itemName: this.itemNameInput?.value }));\n    }\n  }\n\n  async renderIngredient(ingredient, container, depth = 0) {\n    if (!ingredient) return;\n    const itemEl = document.createElement('div');\n    itemEl.className = 'tree-node';\n    const hasChildren = ingredient.components && ingredient.components.length > 0;\n    const isExpanded = depth < 2;\n    let itemClass = 'item-card-treeleg';\n    if (ingredient.type?.includes('legendary')) itemClass += ' legendary';\n    if (ingredient.type?.includes('precursor')) itemClass += ' precursor';\n    if (ingredient.type === 'account_bound') itemClass += ' account-bound';\n\n    try {\n      const iconUrl = await this.getIconUrl(ingredient);\n      const rarityClass = typeof getRarityClass === 'function' ? getRarityClass(ingredient.rarity) : '';\n      const normalizedName = ingredient.name ? ingredient.name.toLowerCase() : '';\n      // Buscar si este ingrediente tiene un mensaje de precio personalizado\n      const customText = this.customPriceTexts.find(ct => {\n        if (!ct) return false;\n        const n = ct.name ? ct.name.toLowerCase() : '';\n        const nameMatch = n && n === normalizedName;\n        const keywordMatch = ct.keywords && ct.keywords.some(k => normalizedName.includes(k.toLowerCase()));\n        return nameMatch || keywordMatch;\n      });\n      const vialesConPrecio = [\n        'vial de sangre poderosa',\n        'vial de sangre potente',\n        'vial de sangre fuerte',\n        'vial de sangre',\n        'vial de sangre débil'\n      ];\n      const isVial = normalizedName.includes('vial') && !vialesConPrecio.some(v => normalizedName === v);\n      const hasComponents = hasChildren;\n\n      const isLegendary = ingredient.type?.includes('legendary');\n      const hasBuyPrice = ingredient.buyPrice > 0;\n      const hasSellPrice = ingredient.sellPrice > 0;\n      const showPrice = !customText && (this.isBasicMaterial(ingredient.id) || ingredient.isPriceLoaded() || (isLegendary && (hasBuyPrice || hasSellPrice)));\n      let totalBuyPrice = typeof ingredient.total_buy === 'number' ? ingredient.total_buy : ingredient.getTotalBuyPrice();\n      let totalSellPrice = typeof ingredient.total_sell === 'number' ? ingredient.total_sell : ingredient.getTotalSellPrice();\n\n      if ((!totalBuyPrice || !totalSellPrice) && hasComponents) {\n        const compPrices = this.calculateComponentsPrice(ingredient);\n        if (!totalBuyPrice && compPrices.buy > 0) totalBuyPrice = compPrices.buy;\n        if (!totalSellPrice && compPrices.sell > 0) totalSellPrice = compPrices.sell;\n      }\n\n      let priceTooltip = '';\n      if (customText) {\n        priceTooltip = customText.display;\n      } else if ((ingredient.isPriceLoaded() || isLegendary || hasComponents) && (totalBuyPrice > 0 || totalSellPrice > 0)) {\n        const buyText = totalBuyPrice > 0 ? `Compra: ${formatGold(totalBuyPrice)}` : 'Compra: N/A';\n        const sellText = totalSellPrice > 0 ? `Venta: ${formatGold(totalSellPrice)}` : 'Venta: N/A';\n        priceTooltip = `${buyText} | ${sellText}${(!hasBuyPrice || !hasSellPrice) && hasComponents ? ' (calculado de componentes)' : ''}`;\n      } else if (hasComponents) {\n        priceTooltip = 'Precio calculado de los componentes';\n      } else if (isVial) {\n        priceTooltip = 'No comerciable';\n      } else {\n        priceTooltip = 'Precio no disponible';\n      }\n\n      const priceClass = showPrice ? 'has-price' : (customText ? 'custom-text' : 'no-price');\n      const priceContent = showPrice\n        ? `<div class=\"price-row\"><span class=\"price-label\">Compra:</span><span class=\"price-amount\">${formatGoldColored(totalBuyPrice)}</span></div>` +\n          `<div class=\"price-row\"><span class=\"price-label\">Venta:</span><span class=\"price-amount\">${formatGoldColored(totalSellPrice)}</span></div>`\n        : (customText ? customText.display : '');\n\n      itemEl.innerHTML = `\n        <div class=\"${itemClass}\">\n          ${hasChildren ? `<button class=\"toggle-children\" data-expanded=\"${isExpanded}\">${isExpanded ? '−' : '+'}</button>` : '<div style=\"width: 24px;\"></div>'}\n          <img class=\"item-icon\" src=\"${iconUrl}\" alt=\"${ingredient.name || 'Item'}\" title=\"${ingredient.name || 'Item'}\" onerror=\"this.onerror=null;this.src='${this._getDefaultIconUrl()}';\">\n          <div class=\"item-name ${rarityClass}\">\n            ${isLegendary ? `<a href=\"/item?id=${ingredient.id}\" class=\"item-link\" target=\"_blank\">${ingredient.name || 'Item'}</a>` : (ingredient.name || 'Item')}\n          </div>\n            <div class=\"item-details\">\n              ${ingredient.count > 1 ? `<span class=\"item-count\">x${Math.round(ingredient.count)}</span>` : ''}\n              <div class=\"item-price-container ${priceClass}\" title=\"${priceTooltip}\">\n              ${priceContent}\n            </div>\n          </div>\n        </div>`;\n\n      container.appendChild(itemEl);\n\n      if (hasChildren) {\n        const toggleBtn = itemEl.querySelector('.toggle-children');\n        if (toggleBtn) {\n          toggleBtn.addEventListener('click', (e) => {\n            e.stopPropagation();\n            const subItems = itemEl.nextElementSibling;\n            const expanded = toggleBtn.getAttribute('data-expanded') === 'true';\n            if (expanded) {\n              subItems.style.display = 'none';\n              toggleBtn.textContent = '+';\n              toggleBtn.setAttribute('data-expanded', 'false');\n            } else {\n              subItems.style.display = 'block';\n              toggleBtn.textContent = '−';\n              toggleBtn.setAttribute('data-expanded', 'true');\n            }\n          });\n        }\n        const subItemsEl = document.createElement('div');\n        subItemsEl.className = 'sub-items';\n        subItemsEl.style.display = isExpanded ? 'block' : 'none';\n        container.appendChild(subItemsEl);\n        const promises = ingredient.components.map(c => this.renderIngredient(c, subItemsEl, depth + 1));\n        await Promise.all(promises);\n      }\n    } catch (error) {\n      console.error('Error al renderizar ingrediente:', error);\n      itemEl.innerHTML = `<div class=\"item-card-treeleg\"><div class=\"item-name\">Error al cargar el ítem</div></div>`;\n      container.appendChild(itemEl);\n    }\n  }\n\n  showMessage(message) {\n    const messageEl = document.createElement('div');\n    messageEl.className = 'message';\n    messageEl.textContent = message;\n    if (this.craftingTreeEl) {\n      this.craftingTreeEl.innerHTML = '';\n      this.craftingTreeEl.appendChild(messageEl);\n      setTimeout(() => {\n        if (messageEl.parentNode === this.craftingTreeEl) {\n          this.craftingTreeEl.removeChild(messageEl);\n        }\n      }, 3000);\n    }\n  }\n\n  showError(message) {\n    if (this.craftingTreeEl) {\n      this.craftingTreeEl.innerHTML = `<div class=\"error\"><strong>Error:</strong> ${message}</div>`;\n    }\n    if (this.summaryEl) this.summaryEl.style.display = 'none';\n  }\n\n  renderProfitSummary(sellPrice, buyPrice, craftingCost) {\n    if (!this.summaryEl || !sellPrice || !craftingCost) return;\n    const existing = this.summaryEl.querySelectorAll('.summary-profit');\n    existing.forEach(s => s.remove());\n    const profitSell = Math.round((sellPrice * 0.85) - craftingCost);\n    const profitBuy = Math.round((buyPrice * 0.85) - craftingCost);\n    const profitEl = document.createElement('div');\n    profitEl.className = 'summary-profit';\n    profitEl.innerHTML = `\n      <h3>Resumen de Ganancias</h3>\n      <div class=\"summary-subsection\">\n        <h4>Por venta listada</h4>\n        <div class=\"summary-item\"><span>Precio de venta (85%):</span><span>${formatGoldColored(Math.round(sellPrice * 0.85))}</span></div>\n        <div class=\"summary-item\"><span>Costo de crafteo:</span><span>${formatGoldColored(craftingCost)}</span></div>\n        <div class=\"summary-item profit-total\"><strong>Ganancia estimada:</strong><strong style=\"color: ${profitSell >= 0 ? 'var(--success)' : 'var(--error)'};\">${formatGoldColored(profitSell)}</strong></div>\n      </div>\n      <div class=\"summary-subsection\" style=\"margin-top: 15px;\">\n        <h4>Por venta directa</h4>\n        <div class=\"summary-item\"><span>Precio de compra (85%):</span><span>${formatGoldColored(Math.round(buyPrice * 0.85))}</span></div>\n        <div class=\"summary-item\"><span>Costo de crafteo:</span><span>${formatGoldColored(craftingCost)}</span></div>\n        <div class=\"summary-item profit-total\"><strong>Ganancia estimada:</strong><strong style=\"color: ${profitBuy >= 0 ? 'var(--success)' : 'var(--error)'};\">${formatGoldColored(profitBuy)}</strong></div>\n      </div>\n      <div class=\"summary-note\"><small>Nota: Los precios de materiales mostrados están calculados de acuerdo a la oferta y demanda del mercado. Y no contempla otros métodos de obtención como puede ser la \"Forja Mística\".</small><br><small>Nota 2: El precio para el trébol místico se ocupa la cantidad promedio que se requiere para obtener los 77 tréboles, por lo que según el RNG puede variar.</small></div>`;\n    this.summaryEl.appendChild(profitEl);\n  }\n\n  renderSummary() {\n    if (!this.currentTree) return;\n    const marketBuy = this.currentTree.getTotalBuyPrice();\n    const marketSell = this.currentTree.getTotalSellPrice();\n    const craftingCost = this.workerTotals ? this.workerTotals.totalBuy : this.calculateComponentsPrice(this.currentTree).buy;\n\n    let html = `\n      <div class=\"summary-item\"><span>Precio venta:</span><span>${marketSell > 0 ? formatGoldColored(marketSell) : 'N/A'}</span></div>\n      <div class=\"summary-item\"><span>Precio compra:</span><span>${marketBuy > 0 ? formatGoldColored(marketBuy) : 'N/A'}</span></div>`;\n    if (craftingCost > 0) {\n      html += `<div class=\"summary-item\"><strong>Costo de crafteo total:</strong><strong>${formatGoldColored(craftingCost)}</strong></div>`;\n    }\n    if (craftingCost === 0) {\n      html += `<div class=\"summary-item\"><span>Información de crafteo:</span><span>No disponible para todos los componentes</span></div>`;\n    }\n\n    this.summaryContentEl.innerHTML = html;\n    if (marketBuy > 0 && marketSell > 0 && craftingCost > 0) {\n      // La ganancia se calcula usando el precio de venta (sell) y de compra (buy)\n      this.renderProfitSummary(marketSell, marketBuy, craftingCost);\n    }\n  }\n\n    setLoading(isLoading) {\n      this.isLoading = isLoading;\n      if (this.skeletonEl) this.skeletonEl.classList.toggle('hidden', !isLoading);\n      if (this.craftingTreeEl && isLoading) {\n        this.craftingTreeEl.innerHTML = '';\n      }\n      if (this.summaryEl) this.summaryEl.classList.toggle('hidden', isLoading);\n    }\n\n  async getIconUrl(ingredient) {\n    if (!ingredient) return this._getDefaultIconUrl();\n    try {\n      if (typeof ingredient._generateIconUrl === 'function') return await ingredient._generateIconUrl();\n      if (ingredient.icon) {\n        if (ingredient.icon.startsWith('http')) return ingredient.icon;\n        if (ingredient.icon.includes('/')) return `https://render.guildwars2.com/file/${ingredient.icon}`;\n        return `https://render.guildwars2.com/file/${ingredient.icon}.png`;\n      }\n      if (ingredient.id) return `https://render.guildwars2.com/file/${ingredient.id}.png`;\n      return this._getDefaultIconUrl();\n    } catch (e) {\n      console.error('[getIconUrl] Error al obtener icono', e);\n      return this._getDefaultIconUrl();\n    }\n  }\n\n  calculateComponentsPrice(ingredient) {\n    if (!ingredient.components || ingredient.components.length === 0) {\n      return { buy: 0, sell: 0 };\n    }\n    return ingredient.components.reduce((totals, component) => {\n      const buyPrice = component.buyPrice > 0 ? component.buyPrice * component.count : 0;\n      const sellPrice = component.sellPrice > 0 ? component.sellPrice * component.count : 0;\n      const compPrices = this.calculateComponentsPrice(component);\n      const scaledBuy = compPrices.buy * component.count;\n      const scaledSell = compPrices.sell * component.count;\n      return {\n        buy: totals.buy + buyPrice + scaledBuy,\n        sell: totals.sell + sellPrice + scaledSell\n      };\n    }, { buy: 0, sell: 0 });\n  }\n\n  _getDefaultIconUrl() {\n    return 'https://render.guildwars2.com/file/0120CB0368B7953F0D3BD2A0C9100BCF0839FF4D/219035.png';\n  }\n\n  clearCache() {\n      const successGW2 = gw2API.clearCache();\n      const successDW2 = clearPriceCache ? clearPriceCache() : true;\n      if (successGW2 && successDW2) {\n      alert('Caché limpiado correctamente');\n      if (this.currentTree) this.loadItem({ itemId: this.itemIdInput?.value, itemName: this.itemNameInput?.value });\n    } else {\n      alert('Error al limpiar la caché');\n    }\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.LegendaryUtils = { LegendaryCraftingBase, Ingredient };\n}\n\nconst quickLoadButtons1 = {\n  btnTwilight: { id: 'btnTwilight', itemId: '30704', itemName: 'Crepúsculo' },\n  btnFrostfang: { id: 'btnFrostfang', itemId: '30684', itemName: 'Colmillo escarcha' },\n  btnIncineradora: { id: 'btnIncineradora', itemId: '30687', itemName: 'Incineradora' },\n  btnFestin: { id: 'btnFestin', itemId: '30692', itemName: 'El Festín' },\n  btnMeteorologico: { id: 'btnMeteorologico', itemId: '30695', itemName: 'Meteorológico' },\n  btnHaz: { id: 'btnHaz', itemId: '30699', itemName: 'Haz' },\n  btnJuglar: { id: 'btnJuglar', itemId: '30688', itemName: 'El Juglar' },\n  btnKotaki: { id: 'btnKotaki', itemId: '30691', itemName: \"Kamohoali'i Kotaki\" },\n  btnKraitkin: { id: 'btnKraitkin', itemId: '30701', itemName: 'Kraitkin' },\n  btnProfecias: { id: 'btnProfecias', itemId: '30696', itemName: 'Las Profecías del Buscador de la Llama' },\n  btnRodgort: { id: 'btnRodgort', itemId: '30700', itemName: 'Rodgort' },\n  btnAullador: { id: 'btnAullador', itemId: '30702', itemName: 'Aullador' },\n  btnAmanecer: { id: 'btnAmanecer', itemId: '30703', itemName: 'Amanecer' },\n  btnJuggernaut: { id: 'btnJuggernaut', itemId: '30690', itemName: 'El Juggernaut' },\n  btnKudzu: { id: 'btnKudzu', itemId: '30685', itemName: 'Kudzu' },\n  btnDepredador: { id: 'btnDepredador', itemId: '30694', itemName: 'El Depredador' },\n  btnSonador: { id: 'btnSonador', itemId: '30686', itemName: 'El Soñador' },\n  btnBifrost: { id: 'btnBifrost', itemId: '30698', itemName: 'El Bifrost' },\n  btnFrenesi: { id: 'btnFrenesi', itemId: '30697', itemName: 'Frenesí' }\n};\n\n// Mensajes personalizados para ítems sin precio en el mercado\nconst customPriceTexts1 = [\n  { name: 'Don de la exploración', display: 'Recompensa por completar mapas', keywords: ['exploraci'] },\n  { name: 'Don de la batalla', display: 'Recompensa por completar la ruta del don de la batalla en WvW', keywords: ['don de la batalla'] },\n  { name: 'Esquirla de hematites', display: 'Se compra en la forja mística', keywords: ['hematites'] },\n  { name: 'Esquirla de obsidiana', display: 'Se compra por karma con NPC', keywords: ['obsidiana'] }\n];\n\nwindow.appFirstGen = new LegendaryCraftingBase({\n  getItemById: id => getLegendaryItem(parseInt(id)),\n  items: Object.values(LEGENDARY_ITEMS),\n  createIngredientTree: createIngredientTree1,\n  isBasicMaterial,\n  quickLoadButtons: quickLoadButtons1,\n  customPriceTexts: customPriceTexts1,\n    elementIds: {\n      craftingTree: 'craftingTree',\n      skeleton: 'craftingTreeSkeleton',\n      summary: 'summary',\n      summaryContent: 'summaryContent',\n      clearCache: 'clearCache'\n    }\n  });\n\nconst quickLoadButtons3 = {\n  btnDesgarro: { id: 'btnDesgarro', itemId: '96937', itemName: 'Desgarro de Aurene' },\n  btnGarra: { id: 'btnGarra', itemId: '96203', itemName: 'Garra de Aurene' },\n  btnCola: { id: 'btnCola', itemId: '95612', itemName: 'Cola de Aurene' },\n  btnRazonamiento: { id: 'btnRazonamiento', itemId: '95808', itemName: 'Razonamiento de Aurene' },\n  btnSabiduria: { id: 'btnSabiduria', itemId: '96221', itemName: 'Sabiduría de Aurene' },\n  btnColmillo: { id: 'btnColmillo', itemId: '95675', itemName: 'Colmillo de Aurene' },\n  btnMirada: { id: 'btnMirada', itemId: '97165', itemName: 'Mirada de Aurene' },\n  btnEscama: { id: 'btnEscama', itemId: '96028', itemName: 'Escama de Aurene' },\n  btnAliento: { id: 'btnAliento', itemId: '97099', itemName: 'Aliento de Aurene' },\n  btnVoz: { id: 'btnVoz', itemId: '97783', itemName: 'Voz de Aurene' },\n  btnMordisco: { id: 'btnMordisco', itemId: '96356', itemName: 'Mordisco de Aurene' },\n  btnPeso: { id: 'btnPeso', itemId: '95684', itemName: 'Peso de Aurene' },\n  btnVuelo: { id: 'btnVuelo', itemId: '97590', itemName: 'Vuelo de Aurene' },\n  btnPersuasion: { id: 'btnPersuasion', itemId: '97377', itemName: 'Persuasión de Aurene' },\n  btnAla: { id: 'btnAla', itemId: '97077', itemName: 'Ala de Aurene' },\n  btnReflexion: { id: 'btnReflexion', itemId: '96652', itemName: 'Reflexión de Aurene' }\n};\n\nconst customPriceTexts3 = [\n  { name: 'Don de la exploración', display: 'Recompensa por completar mapas', keywords: ['exploraci'] },\n  { name: 'Don de la batalla', display: 'Recompensa por completar la ruta del don de la batalla en WvW', keywords: ['don de la batalla'] },\n  { name: 'Esquirla de hematites', display: 'Se compra en la forja mística', keywords: ['hematites'] },\n  { name: 'Esquirla de obsidiana', display: 'Se compra por karma con NPC', keywords: ['obsidiana'] }\n];\n\nwindow.appThirdGen = new LegendaryCraftingBase({\n  getItemById: id => getLegendary3GenItem(parseInt(id)),\n  items: Object.values(LEGENDARY_ITEMS_3GEN),\n  createIngredientTree: createIngredientTree3,\n  isBasicMaterial: isBasic3GenMaterial,\n  quickLoadButtons: quickLoadButtons3,\n  customPriceTexts: customPriceTexts3,\n    elementIds: {\n      craftingTree: 'craftingTreeThird',\n      skeleton: 'craftingTreeSkeletonThird',\n      summary: 'summaryThird',\n      summaryContent: 'summaryContentThird',\n      loadTree: 'loadTreeThird',\n      clearCache: 'clearCacheThird',\n      itemIdInput: 'itemIdThird',\n      itemNameInput: 'itemNameThird'\n    }\n  });\n\n// Expose legendary items data globally for other modules\nwindow.LEGENDARY_ITEMS = LEGENDARY_ITEMS;\nwindow.LEGENDARY_ITEMS_3GEN = LEGENDARY_ITEMS_3GEN;\n/**\n * Global container with all legendary item datasets. Other modules should\n * reference this object instead of importing the constants directly.\n */\nwindow.LegendaryData = {\n  LEGENDARY_ITEMS,\n  LEGENDARY_ITEMS_3GEN,\n  BASIC_MATERIALS,\n  BASIC_MATERIALS_3GEN\n};\n"],"names":["gw2API","constructor","this","BASE_URL","ITEMS_ENDPOINT","PRICES_ENDPOINT","RECIPES_ENDPOINT","ITEMS_BULK_ENDPOINT","CACHE_PREFIX","CACHE_DURATION","_fetchWithCache","url","useCache","cacheKey","btoa","cached","getCached","response","fetchDedup","ok","Error","status","cloned","clone","data","json","setCached","error","console","getItemPrices","itemId","getItemDetails","item","warn","icon","startsWith","cleanPath","replace","id","name","message","getItemsBulk","itemIds","length","idsParam","join","findRecipesForItem","recipeIds","recipesUrl","clearCache","Object","keys","localStorage","forEach","key","removeItem","e","Ingredient","type","rarity","count","parent","components","source","_buyPrice","_sellPrice","_priceLoaded","defineProperty","get","_icon","_generateIconUrl","set","value","enumerable","configurable","_getDefaultIconUrl","itemData","_formatIconUrl","iconPath","substring","addComponent","component","push","buyPrice","sellPrice","setPrices","isPriceLoaded","getTotalBuyPrice","getTotalSellPrice","calculateTotals","multiplier","effective","buy","sell","isCraftable","totalBuy","totalSell","todosTienenPrecio","counts","map","c","componente","idx","originalCount","totalesComponente","toJSON","adaptIngredientForWorker","ing","qty","buy_price","sell_price","is_craftable","Array","isArray","children","_mapQtyToCount","node","applyWorkerData","src","dest","total_buy","total_sell","total_crafted","crafted_price","i","_costsWorker","BASIC_MATERIALS","GIFT_OF_MASTERY_TREE","GIFT_OF_FORTUNE_TREE","LEGENDARY_ITEMS","isBasicMaterial","BASIC_MATERIALS_3GEN","GIFT_OF_JADE_MASTERY_TREE","DRACONIC_TRIBUTE_TREE","GIFT_OF_AURENE_BASE","createWeaponPoem","weaponId","weaponName","weaponMaterialId","weaponType","weaponTypes","hacha","daga","maza","pistola","cetro","espada","foco","escudo","antorcha","cuerno","mandoble","martillo","arco_largo","rifle","arco_corto","baston","lowerName","toLowerCase","keywords","entries","some","keyword","includes","getWeaponType","materialId","createGiftOfAurenesRendering","gift","JSON","parse","stringify","unshift","WEAPON_DATA","precursorId","LEGENDARY_ITEMS_3GEN","fromEntries","weapon","endsWith","createLegendaryWeapon","isBasic3GenMaterial","String","LegendaryCraftingBase","config","getItemById","items","createIngredientTree","quickLoadButtons","customPriceTexts","ids","elementIds","craftingTreeEl","document","getElementById","craftingTree","skeletonEl","skeleton","summaryEl","summary","summaryContentEl","summaryContent","loadTreeBtn","loadTree","clearCacheBtn","itemIdInput","itemNameInput","currentTree","isLoading","activeButton","workerTotals","totalCrafted","calculateComponentsPrice","bind","initializeEventListeners","_setActiveButton","button","querySelectorAll","btn","classList","remove","add","_findButtonIdByItemId","itemIdStr","entry","find","_","d","_handleQuickLoad","buttonId","itemName","loadItem","addEventListener","updateTotals","treeForWorker","updatedTree","totals","async","tree","globalQty","Worker","URL","Promise","resolve","reject","handleMessage","removeEventListener","handleError","err","postMessage","ingredientTree","runCostsWorker","fallback","parseInt","setLoading","renderTree","renderSummary","showError","innerHTML","renderIngredient","style","display","retryBtn","ingredient","container","depth","itemEl","createElement","className","hasChildren","isExpanded","itemClass","iconUrl","getIconUrl","rarityClass","getRarityClass","normalizedName","customText","ct","n","nameMatch","keywordMatch","k","vialesConPrecio","isVial","v","hasComponents","isLegendary","hasBuyPrice","hasSellPrice","showPrice","totalBuyPrice","totalSellPrice","compPrices","priceTooltip","buyText","formatGold","priceClass","priceContent","formatGoldColored","Math","round","appendChild","toggleBtn","querySelector","stopPropagation","subItems","nextElementSibling","getAttribute","textContent","setAttribute","subItemsEl","promises","all","showMessage","messageEl","setTimeout","parentNode","removeChild","renderProfitSummary","craftingCost","s","profitSell","profitBuy","profitEl","marketBuy","marketSell","html","toggle","reduce","scaledBuy","scaledSell","successGW2","successDW2","clearPriceCache","alert","window","LegendaryUtils","appFirstGen","getLegendaryItem","values","createIngredientTree1","apiDetails","cleanIconPath","EXCLUDED_ITEM_IDS","shouldSkipMarketCheck","prices","getPrice","allSettled","componentData","r","btnTwilight","btnFrostfang","btnIncineradora","btnFestin","btnMeteorologico","btnHaz","btnJuglar","btnKotaki","btnKraitkin","btnProfecias","btnRodgort","btnAullador","btnAmanecer","btnJuggernaut","btnKudzu","btnDepredador","btnSonador","btnBifrost","btnFrenesi","appThirdGen","getLegendary3GenItem","createIngredientTree3","btnDesgarro","btnGarra","btnCola","btnRazonamiento","btnSabiduria","btnColmillo","btnMirada","btnEscama","btnAliento","btnVoz","btnMordisco","btnPeso","btnVuelo","btnPersuasion","btnAla","btnReflexion","LegendaryData"],"mappings":"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"}