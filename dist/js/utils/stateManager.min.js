const t=new Map,e=new Map,n=new IntersectionObserver(n=>{n.forEach(n=>{const s=n.target.dataset.stateId;if(s&&(e.set(s,n.isIntersecting),n.isIntersecting)){const e=t.get(s),a=n.target._pendingState;e&&a&&(e(a),n.target._pendingState=null)}})});function s(e,s,a){s.dataset.stateId=e,t.set(e,a),n.observe(s)}function a(n,s){const a=document.querySelector(`[data-state-id="${n}"]`);if(a)if(e.get(String(n))){const e=t.get(String(n));e&&e(s)}else a._pendingState=s}export{s as register,a as update};
