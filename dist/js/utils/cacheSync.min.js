const e="undefined"!=typeof window&&"BroadcastChannel"in window?new BroadcastChannel("cache-sync"):null;let t=null;function n(n){t=n,e&&e.addEventListener("message",({data:n})=>{const{type:s,key:a,entry:o}=n||{};if("request-bundles"!==s)s&&a&&("set"===s&&o?t.set(a,o):"delete"===s&&t.delete(a));else{if(!t)return;t.forEach((t,n)=>{n.startsWith("bundle_")&&e.postMessage({type:"set",key:n,entry:t})})}})}function s(t,n){e&&e.postMessage({type:"set",key:t,entry:n})}function a(t){e&&e.postMessage({type:"delete",key:t})}function o(){e&&e.postMessage({type:"request-bundles"})}export{a as notifyDelete,s as notifySet,o as requestBundleSync,n as setupCacheSync};
